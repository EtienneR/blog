<!DOCTYPE html>
<html data-html-server-rendered="true" lang="fr" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22fr%22%7D%7D">
  <head>
    <title>Authentification avec JWT sur Nuxt.js - https://etienner.github.io</title><meta name="gridsome:hash" content="499d0acdb60fd13e5c28c9817b15999f21ae23a4"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Apr√®s avoir cr√©√© une API avec une authentification JWT, on peut s&#x27;attaquer √† la partie front avec le framework Nuxt bas√© sur Vue. Pour cela, nous allons utiliser le framework CSS Buefy (bas√© sur Bulma"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Authentification avec JWT sur Nuxt.js"><meta data-vue-tag="ssr" property="og:description" content="Apr√®s avoir cr√©√© une API avec une authentification JWT, on peut s&#x27;attaquer √† la partie front avec le framework Nuxt bas√© sur Vue. Pour cela, nous allons utiliser le framework CSS Buefy (bas√© sur Bulma"><meta data-vue-tag="ssr" property="og:url" content="https://etienner.github.io/authentification-avec-jwt-sur-nuxt-js/"><meta data-vue-tag="ssr" name="twitter:domain" content="https://etienner.github.io"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Authentification avec JWT sur Nuxt.js"><meta data-vue-tag="ssr" name="twitter:description" content="Apr√®s avoir cr√©√© une API avec une authentification JWT, on peut s&#x27;attaquer √† la partie front avec le framework Nuxt bas√© sur Vue. Pour cela, nous allons utiliser le framework CSS Buefy (bas√© sur Bulma"><meta data-vue-tag="ssr" name="twitter:site" content="@etiennerouzeaud"><meta data-vue-tag="ssr" name="twitter:creator" content="@etiennerouzeaud"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.ddbb36ea.css" as="style"><link rel="preload" href="/assets/js/app.57e0f4bd.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.619d8641.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.77a6618c.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.dfbaccb8.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.37769e18.js"><link rel="stylesheet" href="/assets/css/0.styles.ddbb36ea.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header class="py-2 text-center"><strong><a href="/" title="Accueil" class="active">Etienne ROUZEAUD - D√©veloppeur Web</a></strong></header><main><div class="title py-2 text-center" data-v-2084d89c><h1 class="display-5 pt-2" data-v-2084d89c>Authentification avec JWT sur Nuxt.js</h1><!----></div><div class="container"><div class="row"><div class="mt-4 col-lg-2"><p><em><span>15 septembre 2019</span></em></p><ul class="list-unstyled"><li>
            üè∑Ô∏è <a href="/tag/API/">API</a></li><li>
            üè∑Ô∏è <a href="/tag/VueJS/">VueJS</a></li></ul><!----></div><article class="mt-4 col-lg-10"><p>Apr√®s avoir cr√©√© une API avec une authentification JWT, on peut s'attaquer √† la partie front avec le framework Nuxt bas√© sur Vue. Pour cela, nous allons utiliser le framework CSS Buefy (bas√© sur Bulma) et le module Nuxt intitul√© Auth Module. Pour la suite, veillez √† avoir votre serveur d'API allum√©.</p>
<h2>G√©n√©ration application Nuxt</h2>
<p>Dans un terminal, g√©n√©rez un nouveau projet Nuxt √† l'aide de la commande suivante <code class="language-text">npx create-nuxt-app front</code>.
Point important pour la suite, s√©lectionnez le framework "Buefy", le module "axios" et sp√©cificiez que l'application est "Universal" A la fin de l'installation, suivez les instructions en vous placant dans le dossier <code class="language-text">cd front</code>. Installez le module d'authentification <code class="language-text">npm install @nuxtjs/auth</code> et par la suite, lancez le serveur de d√©veloppement avec la commande <code class="language-text">npm run dev</code>.</p>
<p>Remarque : la version de Nuxt utilis√©e lors de la r√©daction de ce tutoriel est la 2.9.1.</p>
<h2>Configuration du module d'authentification</h2>
<p>Dans le dossier <strong>store</strong>, cr√©ez une nouveau fichier <strong>index.js</strong>. Puis ouvrez le fichier <strong>nuxt.config.js</strong> et ajoutez la ligne <code class="language-text">@nuxtjs/auth</code>, dans <code class="language-text">modules</code> puis le code ci-dessous.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">axios<span class="token operator">:</span> <span class="token punctuation">{</span>
  baseURL<span class="token operator">:</span> <span class="token string">'http://localhost:1234/'</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
auth<span class="token operator">:</span> <span class="token punctuation">{</span>
  localStorage<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  cookie<span class="token operator">:</span> <span class="token punctuation">{</span>
    prefix<span class="token operator">:</span> <span class="token string">'auth.'</span><span class="token punctuation">,</span>
    options<span class="token operator">:</span> <span class="token punctuation">{</span>
      path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
      maxAge<span class="token operator">:</span> <span class="token number">10800</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  strategies<span class="token operator">:</span> <span class="token punctuation">{</span>
    local<span class="token operator">:</span> <span class="token punctuation">{</span>
      endpoints<span class="token operator">:</span> <span class="token punctuation">{</span>
        login<span class="token operator">:</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'post'</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token string">'access_token'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        user<span class="token operator">:</span> <span class="token punctuation">{</span> url<span class="token operator">:</span> <span class="token string">'me'</span><span class="token punctuation">,</span> method<span class="token operator">:</span> <span class="token string">'get'</span><span class="token punctuation">,</span> propertyName<span class="token operator">:</span> <span class="token string">'content'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
        logout<span class="token operator">:</span> <span class="token boolean">false</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Dans Axios, on sp√©cifie l'URL de notre API. Puis dans le module <code class="language-text">auth</code>, on d√©clare vouloir utiliser des cookie et non le localStorage. Ensuite, dans <code class="language-text">strategies</code> pour la connexion locale (<code class="language-text">local</code>), on sp√©cifie 2 endpoints, le premier pour la connexion et le second pour r√©cup√©rer les informations de l'utilisateur.</p>
<table>
<thead>
<tr>
<th>Page Nuxt (dossier pages)</th>
<th>URL API</th>
<th>M√©thode</th>
<th>Donn√©es</th>
</tr>
</thead>
<tbody>
<tr>
<td>login.vue</td>
<td>login</td>
<td>POST</td>
<td>token</td>
</tr>
<tr>
<td>user.vue</td>
<td>me</td>
<td>GET</td>
<td>data</td>
</tr>
</tbody>
</table>
<p>La colonne "Donn√©es" correspond au nom du champ retourn√© par l'API d'authentification.</p>
<p>D√®s l'enregistrement des modifications, Nuxt va "rebuilder" tout seul l'application pour prendre en compte les changements de configuration.</p>
<h2>Page prot√©g√©e cot√© front</h2>
<p>Dans le fichier de la page "inspire" (dans le dossier <strong>pages/inspire.vue</strong>), sp√©cifiez le middleware <strong>auth</strong> dans la partie JavaScript.</p>
<div class="gridsome-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  middleware<span class="token operator">:</span> <span class="token string">'auth'</span>
<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 248' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-e40461b4c5ed7b1de26ddca47c8b931f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-e40461b4c5ed7b1de26ddca47c8b931f)' width='1351' height='248' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAMCAYAAADS87vJAAAACXBIWXMAAAsSAAALEgHS3X78AAACOElEQVRIx8WVTW/TQBCG/fugPwD4ARxpuSABFzhw4oK4AkJ8qheERAtUIJVCGhSLpkBpVEBCJG6T2ImdeP39/TK7jYUbIoRUO0R6tOP1Zmb3nZm1dPPCD1w/9x3Xzn7DxVMtXD5DnP5/XCowj3jS7attLN84wK0rbSye%2bIzFkzszWZoT5xcOWVqYTzxp5V4PLx/18WpZxdrj2byg96sPenheNQ97eHp3H0/uKFi53xXPVceU8I%2b/DAmRVgaIIAnhhD68KBBjWnFMjqTrBoYDHb4fIqV9pEl2lDRDGCZw3AhulXgRhoYLyw4FI9ODyUgML640rpTSqZMk%2bZ3pLCPyMRNzcZzC8yP4QSzGKuC%2bTcuHPnYxZp4Y3b/%2bp5y9SNvbTbQ7CgaaCsasggizBTgOuY8opqqKUmEHVF2c3LYpK5YTwqNnvobD56fXl7EfjmRbFmzbIWxyHFYmQLGCNGq5gT6G7fhU7p4gt03mwBgxMIsqwbQntkftYYo1fI6/K/o8lgCy3EBHUTAyDBhElQLwrAZBhFZrD6/Xa9htfcWbjRqera5hZ3cPW81PePuujlpdRpPs2mYD8ocmmh%2b/oCFvof5exvrGJn52uqKKShHAcRy64BxxeMbYXFrgsKxjihuIrPKsF9flZT5d%2bsX7orQW%2bONzNzl00S67BYoH4UKomoGDrgZtOEJf09FXdfTUoZhX9vtg1BrTPkprgWK28wNX1gJ%2bPEOEaNL77pE7gfd9fg%2b4XjhTvDIE%2bAUKj%2bAJwoGlAAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="1351" alt="Erreur 404 : Pas de page login" data-srcset="/assets/static/nuxt_auth_no_login_page.82a2fbd.9dbea19b1b3424598dcc22c9fdcac768.png 480w, /assets/static/nuxt_auth_no_login_page.cbab2cf.9dbea19b1b3424598dcc22c9fdcac768.png 1024w, /assets/static/nuxt_auth_no_login_page.bb33948.9dbea19b1b3424598dcc22c9fdcac768.png 1351w" data-sizes="(max-width: 1351px) 100vw, 1351px" data-src="/assets/static/nuxt_auth_no_login_page.bb33948.9dbea19b1b3424598dcc22c9fdcac768.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/nuxt_auth_no_login_page.bb33948.9dbea19b1b3424598dcc22c9fdcac768.png" width="1351" alt="Erreur 404 : Pas de page login"></noscript></p>
<p>Cette page prot√©g√©e affiche une erreur 404...</p>
<h2>Page d'authentification</h2>
<p>En effet, la page "login" n'existant pas, la pr√©sence de cette erreur 404 est justifi√©e. Pour la faire disparaitre, dans le dossier <strong>pages</strong>, cr√©ez le fichier <strong>login.vue</strong> avec un formulaire comportant un champ pour renseigner le nom d'utilisateur et un second pour le mot de passe.</p>
<div class="gridsome-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>column is-4 is-offset-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title has-text-centered<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Connexion<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-notification</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            {{ error }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-notification</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Username<span class="token punctuation">"</span></span> <span class="token attr-name">label-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Password<span class="token punctuation">"</span></span> <span class="token attr-name">label-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span>
                <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">password-reveal</span>
              <span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>control<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button is-dark is-fullwidth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                Se connecter
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>has-text-centered<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
              Avez-vous un compte ?
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>S'inscrire<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>D√©sormais, la page <a href="http://localhost:3000/inspire" target="_blank" rel="nofollow noopener noreferrer">http://localhost:3000/inspire</a> redirige bien vers <a href="http://localhost:3000/login" target="_blank" rel="nofollow noopener noreferrer">http://localhost:3000/login</a>
. Puis dans la partie JavaScript de cette page.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      error<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">login</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$auth<span class="token punctuation">.</span><span class="token function">loginWith</span><span class="token punctuation">(</span><span class="token string">'local'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
          data<span class="token operator">:</span> <span class="token punctuation">{</span>
            username<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span>
            password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password
          <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/inspire'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> e<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>On r√©cup√®re la valeur des champs <code class="language-text">username</code> et <code class="language-text">password</code> via la fonction <code class="language-text">login</code> d√©finit dans <code class="language-text">methods</code> lors de l'envoi du formulaire. S'il y a une erreur alors, c'est la valeur "error" qui affichera un message.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 548' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-074f3442a35ceb7ecac1fa8e09e843b7'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-074f3442a35ceb7ecac1fa8e09e843b7)' width='1351' height='548' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAaCAYAAAAHfFpPAAAACXBIWXMAAAsSAAALEgHS3X78AAADyklEQVRYw%2bVYW28TRxT2X0n%2bQIiUx6ovVIldEjVSXwpPPPGCBDwhlTaVEzdqCAgk7uIPICGgD9SEkFLggdCipiJBYBMuudjry3p9W9u7vszOx5nxeu1GhQaytmVlpM9nZ3bmzMy355w5Y8/Jw6s4d/wtTh95jelDYXz/3Qv8cICwf3fA4z8YwlX/Gq6djeDyj%2b9wxLeMY/tWcHSXwLNwPYm71xIQ8o%2bbKu7fSHYFv2%2bzzW14sMuLxzBMaFoaKVVDuVyBZQEW450FzcmtDy%2bSc4C1aW6PRbPXajUI2ZyQy0nr0m0IvRaB0aZrcr6MRuZ%2bbw7BO0HcW5jH3bnbuPXrTczP3yHMIZ3W6uui/nKcGA931idd4J%2blv7G2voFYLIq8rreQwF03uYZObkOUKgMSahGbShZxIaNprEfSUBK6RLkKZ8xWPTt2AfGj06ZLhkEuYKLGWFsIaNXHzVc06QJQfAQUHgAlkuXHxMRiUwpUBKheeASefwCuPwTLLoAbYdfWKAn488ki1jc2EI/HoKZSbSSA1b%2biegHG8hcoPd9H8EF/NoLSiheFZZLPvRLFlREH7NUo%2bOoo8GYM6l97YUbO2zqZOwQw%2burVahXFYhFmudwBAi4hv/Qlkk%2b/RmbJh9jiMOJPRhB9PAz1qVciRnXFrrPX4%2bACb74FC%2b2FlTjnHgH/paBtvm8HLxQeEglngPQVQLtYR%2bpCUzae7TpPnrdxETxxmtzhvq3TcscCtkbGdseAao3DrJC7V8RzMyB%2bDI6eBlqC6Y4J6EhpIUCJRrCy/Ayh0EusroZh8XoiwG35/%2bCuWaqnc/tvEiDyjlwuC72gkwVUZQz6VHCXSOgSAVVs0KmjqqrTLhKx7aLnCcjn88hms1Lmcjn7nbWtzM1i1M9yL051JQYkkwmEw2GEwiGZf%2bAT0tq2ZIKdtgCRc8QTcVQqFdkmpGj7GEQf4TprIbIezew9C9jqs5lM%2brP06JSoVsz6Adi4sPUMAY0bZzAYxMTEBKanpzE5OYmpqSkpZ2ZmJGZnZwmn6PkX571AIPAzJn46gd%2bCt6Ueoa%2bnCBDHnyiBQAB9fX0YGhrC4OCgxMDAHox4vfD5fBgbG8U34%2bMYHv6K2gecPqJ/f38//H6/c5z25CkgToDNzU1Eo1G6gsegKIqUoi4QiUQQJQip0BVdUeoQ78Q4Mb73ToEPRG%2bRC2QyGRkTxMbEsahpGhIUJHW9hHyKQ8%2bQ76d5W%2b4rXbGA1sSnTLfPBkzTdKRhGPXoX2YOGLP%2b5fc9aQE7/YJu31Q93dz85/yH5zYJ7wEpuISJsUqKDwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e" width="1351" alt="Erreur 404 : Pas de page login" data-srcset="/assets/static/nuxt_auth_login_error.82a2fbd.8f3d29b9b7417944d2714fdeefa953f4.png 480w, /assets/static/nuxt_auth_login_error.cbab2cf.8f3d29b9b7417944d2714fdeefa953f4.png 1024w, /assets/static/nuxt_auth_login_error.bb33948.8f3d29b9b7417944d2714fdeefa953f4.png 1351w" data-sizes="(max-width: 1351px) 100vw, 1351px" data-src="/assets/static/nuxt_auth_login_error.bb33948.8f3d29b9b7417944d2714fdeefa953f4.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/nuxt_auth_login_error.bb33948.8f3d29b9b7417944d2714fdeefa953f4.png" width="1351" alt="Erreur 404 : Pas de page login"></noscript></p>
<p>Remarque : si vous avez l'erreur <code class="language-text">_context.t0.response is undefined</code>, c'est que le serveur de votre API n'est pas d√©marr√©.</p>
<h2>VueX : Getters</h2>
<p>Dans le dossier <strong>store</strong>, cr√©ez un nouveau fichier <strong>index.js</strong> avec les 2 getters ci-dessous.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">const</span> getters <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">isAuthenticated</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>loggedIn
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  <span class="token function">loggedInUser</span><span class="token punctuation">(</span><span class="token parameter">state</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> state<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>user
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 202 143' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-62bd61d4447ce3da2bd8618d76d14227'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-62bd61d4447ce3da2bd8618d76d14227)' width='202' height='143' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAAsSAAALEgHS3X78AAAPNklEQVRo3tWa93JbSXbG9UJ%2bBr%2bC38FV9s7%2b41qvd8sulcdhdidrRuQojDQSlSiRSsxJTGIWCBAZIAIBEDnnHO7Fz40LgAQYJGo0cq1QBeKyb3ff7tOnv%2b87p%2b8lzvg0m00%2b5POh7f8/P5dag63V68iyrPx2B59NpzE6A5RrDcKRBJlcgfk1DVt6O5ObZiRRz%2bOPUapWcfsixDN5XOI3V64fGeFTMMOl1p/5lS1%2b96cvMFrtSqFUyTO7vseKysj98XWGxlZ5tqTm%2bbKGNwY7s1tGXu9ouflsRZSpePHahNZk4874Js5IVulDlj8hA6QzOUbG5xQvUAxQzrP4xozO6uD26BIjSxrsYnVX3hgxHfhZU5uZXd1lctuKymhl3RIgGY/zeHKdNbO/YwD50zDAyf3aWrnWx2K28v29GUz%2bNIFAiFC6SDKVJpTI4o8kyRdK7LsCJLIFUvkypWIBo91Hulj79LZAa7CKyzabRxiQEpN1h5K/ahKfFAgerVbPoPsmoBhHRu7UkTvfZqe827b3/0/OA3on3juBtlecfU/5bd2XT5T1GOQiZedd9/0vn1NPPtlG%2be/Im8969sn%2bL72vSze7W0XuKZPkU2VHmCI1%2b9r0Gu3cvptnPKPZ048k97Rpe2fnP3qdt2WIrjGOvfbYi99pgF5LVeJ50qFi3/1yJEfclesvE/UqJYm8O0nysHhu37VciVy0rFznvRny6dqZ9aRylUzwdD9SrkhAGz8x1rYRvOEqpXrzQgv7bgN0VuHguRmvKUNFAOPuLSNVMV7fjAXVPTsZd5qYOU7UFEP70w6bP%2b8T3vSwcnkTvy5JdM%2bP5q6JgCqE4Y4e716cg5cGZi%2brqFcbmIf0JCJVKsEU2rtmMqESnjk79qUgoXUnU/%2byRi5RwTW1j/6pk4Q1zpuvNtA985PLR3B5Q0djruaq/OPnbqaNFSL%2bEteex1lS5dA7Suj2i%2byaCww8jqByVS%2b2BbrultH5cGni1GIZdq7uETbEUP%2b4w9o3agwP9/Gve9mf8eDbOiR4UCStC7A/5cb8QMeiMITxuQPdzwacc272J1yEtEFsK%2b2B%2b2ZsJMIl7A8MxEM16qkcJnG98oWKiDWm1KsK6l340zq2CTtbP%2brwb/uxTngplFMEQjGln4ayWDJ3JsQ4xZVmM8kLdYmor8ToUobZ5QS/%2b9bPj6Mx5jXFi26B9rXjsZ43Q/uUkkVM9wzoH5hxrQUIqwKYRm3KgE0zPnKeOIYRB%2bG9MGFtFO%2b6D8eME/u8l6DwgLA2wuFmkFwgw94vJoqZCvqf3mBa8JM0htAP2wjthTANWxSvyceL6IeMJDxZrKMWPNthItow2hsaHCtxkrFDLI7DtgE6izW5kGDBWObAUUDTWmkh54dexLg5kWD%2bTZZ700k8icbFDNAFmlq%2bRq1YpyFctlZunKrbKu8aqyHigRb4KaDUuV/JVI9E1tE%2bFm3qoq96qa703frUhZBS1rHeQGq0JyTXWtfN1kCo5NpYURfPaNWTGg0xcekIRLtgWChLfXNo1GXqUvs6X2hQbZwAwZO0cUQlZ4maLiILi8tikKdQ/kg/nGwryiT5DLboodVe6jrJGOcsVK/%2baD1XUiT9sTbpSvyWAeUTzHLpXQpOKZEaBHdDlAvSewuNYrQoVr9CIVJE6mku1SXFGFLjgnKph5HkuuivWBFsU6BUaRyNNJvNIjcv0g%2bndUC3QBKjTKYyyrdQLB2Z3Tqsw2cttJyPAwFkpaJExhblYDVAJVvhcNFNzF2gHM3iU0Vo1CS8s/uo7uwTWD5g4fI2hVQZ32sfSVcS27RL4EEIxys/CUuMhFcYqFjGuxGgKtw3bYtxuCHAr1QjnU4h03XGBitz4zwfm2Z1eZHRpy%2bJ5yokwy6W11XKWF02I55gHKlWYFelJpGI8vj%2bL2zqnafovc8AXff4w39%2bw9/9/T/gDRzTi3fFSSpWw7fsZH/Wg/qnXfQC7MzDBrYGddgnnahvatj8VsXOwB5vxNc%2bKZB/xEklUeBgXQCfI4rmhgHzEwPqxw4S9hj6e2Z2BzUETUkMP6tZ/u9t3K%2bD6ATI%2bQxiRSsljAYD9S6WpA6ZeLVBPOLl5uAtNjY3mZ1fJhL2Mbe8LiZv4Pq1a0xMzzMzMYXB5hE2KzL2YhRXNH%2b%2bAbp7qfWxuw4ZFeFxGzzafhtYcmBbDOBfc2N8YkM3ZMA66cL0UExmyIJz2onmtg71bQNuMVnXvIv95za0w3ZCG25Wv9EIZgiJFQ5yMGVDc8eM9hcdB5sRfAt2VDcFi4yYMTw9IB/Ksy%2bYRXFuuYLVYuUIdqUi0xMvmJqZY2JsgqmpKWZerSE1a6xvbuM52OfxyDPch362Vl6x8UavNNtanUNr97/dA3rDYeW6BwSb1Trx/ZTYuw3Cmggtxgm/drLyPyqyYUE3329hmPQLxK4R1sUU1E2YY4qoyR0KrlZHKSYrilBpIXlF0GnYkBAYIClboNBSgo06EV2Ucr5OJV1WMKMp1UQ4HkBSxtheoHxKbL1DUdao4di3khEsEnIZeDGzpNwP%2b1z4QkIlNhvYrFbyAicqhTQuj%2b8IoM80wJEROuj5rvC2EMiRT1TFcxqkXBnqNfm9QbIXtHqvu2xwzGwdHd83ruP6Yb%2bfVK58MTB9WzR4buTXG4zI8hkUx6mgpkt5ra8snUGJ3T7k/oDogrRwJjkq9N0Z38mQ/ShL9b7R4HkWLKcrigtLwt1lgRW1Qk2hu76V7NYXD7/1NIo50mBrI8XAeIqqaDe9mGTFXBYAW%2bH2RBJ/vMbEfIIBoeF3hG6/NhzhxVaOxfU03z6O4fSXGXwqWKMks7KeYlhIXJOzxP2JGBp39b3zkZfed/LdlfQLUFz5fIP9OS/Ol1Yskx6cYwLcbgm63EkSD3sw291tIO0ouvm1BIuWKpvrSb4cjvNaleGzr3zMiGDlh3sh/uNWGGNQqEhBfd8Nt/X9ktDv04aWa0t89zCqTOz2yxj2cJ3bj0J8JcoGhEHuTcb5y8OYghXIzQtnpX61AbSDKjQPbCQ9OYyD2%2bzcteNdcOEU6G96IpC8kCEUiXe0RdsAC68T3F8rKNevVpP862CQBwtpHoxH%2beONMGNLSR6u5lDvZRjTlpTA5rtH7Ulr1Skeb7XbDo5E2DAVufM8xtWRGOvmEuPTUS7fj/dtwd/eAD2YUI5kRJAjxI81QdSaJHOYRi%2b4e/PKngBGiZTgaZvLd8wmYjJPp%2bI8Ws2i0eW4M5MiW5ZZWksxry0Sj1e4K4KVUEZCbymQEqRQztTYspaUPvaMeaIlIXMF4g88irBsLLG9m2X0dZZossb4cgp7tH6KyX5zD3gbK2RdYl9XmmcHVO%2bZIOwFw4Z0DHjvmlvzHWP8YAP0Jz2PAxa5LvcNvoW4XdfvT5Cekw77jTKoH9cAfaguYgZnml52awoRlAkW%2bhC42eVt8buxlyNWlAkKJF/WFhDhAl5vCZO3pSVkVGJfR9N1NoVrL%2b6JQKcqozYVSIutEotU0B5USAnBtKLOkxL9tNq%2bsZWpVCTWNTmiBblny32MLcBxeFo6jLM3ZG1ndF45sM76iO95mfz9EpmYRDYRxO1rxxJSp83NJyFeWauMjoT4w60YgWCZz/7Xw9RekYnZGJ/9EFQSFW5ngS/vRRiZjfP7K0H2vWUuX/FybTZDsdTg%2bv0Qt%2bdS3BZg%2bBdR7%2bpolBvPYlyfTH18EFSYQPmtY3m6T7lYxTZiYvnzbcICEM3jB208iIYJdFigS4N6c5ZZfVutrQgt8MeBADfEoJ/Px/nn74OMr6YY3coTDpaY28tz70WMp2tZvrjp55vRBI%2bm45jDDfbUaX4QOuHBVILB0Rhzu3nG5%2bL828%2bR9tg%2bngGOPaBwEGX9rzv41CEsT6yob%2bnFyovIbUhPKtQgGXJjdng6HtBOUFy/H%2bTblylMAuUHBH1tWYo8mRIcLqiwtT2uPIywK9z8lWAGV1rG48zzvaDBBeHy44sJbown2DQUuDcWY3QlzZMZIZiexbF6KzwejzGtLR4LoebH2gLdFFOlrgQ2Ul2UCTVYr0qdZIW4FntSFhhRbzT6ZHRJxPllsa%2bLrbR5ue0Vrfihi58n01hKQqVbJgBVSWOJe8lc46isVGun3jLdZM0R4H6sLXAGwvbm4ppvZ9D%2bnGBv5HnGCZN8RoTaPFG/t2%2b5Jx330Tyg94HlZElQXefgRFzXKvIpuiyL1c6V5Asfm/Uec73tWOttx13Nj8oC3ZOiUBrLywPFJBlLiI0vVWSSdfL5NC3M69azGDP8%2bU70VBT2N3k4%2bl46oFjC/MxBLpjC%2bMiC7q6RTLSM1aynvW07bCHCk5bslc6IxT9BAxyvYD2WYfvKLkF9BNu4E811Helo6zDCSkU63iexYJF/%2btqPP998b5HyN22AUjiHbytIPlml4M8QMacEGEpC5fmoHadwiceqvBacHslJH/zyxDsTNh8fAy76BkizL8vcl605D8DOeTfg5EsYb3uX4GSZ3HN0ft6YfwUL9Lw0cUJxHdHhSZp8ywCaZwz8bQM%2berbUn39sNurHccd7LNiv3gItwaOc7ohJS0IUFROVzhlgpT1hIY4K0aJy5ldKtOmylq1QFVq%2bda8oyupVWckTdM/7TgZQ2ZiPsbExAvG8UElZ6uV2vYpVTXxmCalapZ7Jiv7KZLe3lEy0XMzSyBaRakVmJ19icgT6Uv4fbICuWx8uuJWTXvfSIepBNW51gpjqkOXLa9iXQxw8M2EYc%2bOasKEa2MO1Hia0fcjWd2pMwyalnmbIjOmhkeX/2iThKuOwaolkjl%2bGyMX9St4/lCpQePUM3/XbpFeXCN0cxD9wFf/Vb3D/9WsKFivRRw%2bo5fNEf/mJ8P1h8h4/S8uzmJ3B39gAHeFzMG7HPmHH%2bNJFcPMQ7V0Tmhsa1HetJBxCIzww0XppNLTiwivA0iBiBP2InZ2vN3n95S6mEQu7A7ss/PsGtjkP2UBFhLx%2bIZpqp9026RWTGsJ/5Qs8P9wkr9MQ%2bP5LIk8eEbhxjbzZSXLsCQW3i%2bTEFJmVWdJa18fYAsf7vOBLiWjQSkigf2TXj3M5IJRhAfu4g0y4TNISpyr0fs6dIu3JEDPF8G0GcM658O2ECOvChI0Jovow9lmP2E7gEBoi3sntt/FAVrSEXMmRWV0kubRMSUwyMfac1Oo6BaOOnE6r/EYf3CWzq6XkPKB8YKMSSbeP2WX5rUb4Py4EDLs1g55SAAAAAElFTkSuQmCC' /%3e%3c/svg%3e" width="202" alt="Exemple utilisateur connect√©" data-srcset="/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c3a1b9ec499d7d931f4b7bc583.png 202w" data-sizes="(max-width: 202px) 100vw, 202px" data-src="/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c3a1b9ec499d7d931f4b7bc583.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c3a1b9ec499d7d931f4b7bc583.png" width="202" alt="Exemple utilisateur connect√©"></noscript></p>
<p>La premi√®re fonction renvoit un bool√©en. Lorsque l'utilisateur n'est pas connect√©, la valeur est √©gale √† <code class="language-text">false</code> et <code class="language-text">true</code> si connect√©. Quant √† la seconde, elle retourne les donn√©es fournies par le endpoint "/me" de l'API JWT (ou <code class="language-text">null</code> si non connect√©).</p>
<h2>Modification de la navbar</h2>
<p>Dans le fichier layout <strong>default.vue</strong>, ajoutez le code ci-dessous avant la fermeture de la nav.</p>
<div class="gridsome-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-menu<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>isAuthenticated<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-end<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-item<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      {{ loggedInUser.username }}
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-item<span class="token punctuation">"</span></span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>logout<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>D√©connexion<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">v-else</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-end<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-item<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Connexion<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>navbar-item<span class="token punctuation">"</span></span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Inscription<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Ainsi, √† l'aide d'une condition, on peut afficher le nom de l'utilisateur et ajouter le bouton de d√©connexion. Mais avant de tester, il faut appeler les 2 getters de Vuex dans la partie JavaScript de notre layout (todo: le nom du fichier) ainsi que la fonction de d√©connexion.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> mapGetters <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  computed<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapGetters</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'isAuthenticated'</span><span class="token punctuation">,</span> <span class="token string">'loggedInUser'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$auth<span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          message<span class="token operator">:</span> <span class="token string">'Vous √™tes desormais d√©connect√©(e)'</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">'is-info'</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Cr√©ation d'un utilisateur</h2>
<p>De retour dans le dossier <strong>pages</strong>, cr√©ez un nouveau fichier <strong>register.vue</strong> afin de cr√©er un formulaire d'inscription.</p>
<div class="gridsome-highlight" data-language="html"><pre style="counter-reset: linenumber NaN" class="language-html line-numbers"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>section<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>container<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>columns<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>column is-4 is-offset-4<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>title has-text-centered<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Inscription<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-notification</span> <span class="token attr-name">v-if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>error<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>is-warning<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            {{ error }}
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-notification</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">@submit.prevent</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>register<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Username<span class="token punctuation">"</span></span> <span class="token attr-name">label-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span> <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>username<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span> <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Password<span class="token punctuation">"</span></span> <span class="token attr-name">label-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span>
                <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">password-reveal</span>
              <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-field</span>
              <span class="token attr-name">label</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>Confirmation du password<span class="token punctuation">"</span></span>
              <span class="token attr-name">label-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password_confirm<span class="token punctuation">"</span></span>
            <span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>b-input</span>
                <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password_confirm<span class="token punctuation">"</span></span>
                <span class="token attr-name">v-model</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password_confirm<span class="token punctuation">"</span></span>
                <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>password<span class="token punctuation">"</span></span>
                <span class="token attr-name">password-reveal</span>
              <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-input</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>b-field</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>control<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>button is-dark is-fullwidth<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
                Valider mon inscription
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>

          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>has-text-centered<span class="token punctuation">"</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">="</span><span class="token attr-value"><span class="token property">margin-top</span><span class="token punctuation">:</span> 20px</span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>
              Avez-vous d√©j√† un compte ?
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>nuxt-link</span> <span class="token attr-name">to</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>/login<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Connexion<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>nuxt-link</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">></span></span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Et pour la partie JavaScript.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token function">data</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      username<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      email<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      password_confirm<span class="token operator">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      error<span class="token operator">:</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  methods<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token keyword">async</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>password <span class="token operator">===</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password_confirm<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
          <span class="token comment">// Enregistrement de l'utilisateur</span>
          <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$axios<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'register'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            username<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span>
            password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          <span class="token comment">// Connexion imm√©diate</span>
          <span class="token keyword">await</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$auth<span class="token punctuation">.</span><span class="token function">loginWith</span><span class="token punctuation">(</span><span class="token string">'local'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            data<span class="token operator">:</span> <span class="token punctuation">{</span>
              username<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>username<span class="token punctuation">,</span>
              password<span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>password
            <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>

          <span class="token keyword">this</span><span class="token punctuation">.</span>$router<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token string">'/inspire'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> e<span class="token punctuation">.</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span>message
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>error <span class="token operator">=</span> <span class="token string">'Le mot de passe ne correspond pas'</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>On r√©cup√®re la valeur des champs <code class="language-text">username</code>, <code class="language-text">email</code>, <code class="language-text">password</code> et <code class="language-text">password_confirm</code> via la fonction <code class="language-text">register</code> d√©finit dans <code class="language-text">methods</code> lors de l'envoi du formulaire. S'il y a un erreur alors, c'est la valeur "error" qui affichera un message.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 628' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-8e88c681db3a555e3f20b1b06cbd27dd'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-8e88c681db3a555e3f20b1b06cbd27dd)' width='1351' height='628' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAeCAYAAACc7RhZAAAACXBIWXMAAAsSAAALEgHS3X78AAAEvklEQVRYw%2bVY208cVRjfv4ZXHjCCT8aXAuVilGK8xGhM1RiTmmC0oMi9pmKbGJ%2ba%2bGpiSxMeTGgAG32otggW0gLLXriz7M7MXtgLuzu7c/n5fWd3YKCY0jJLHT3JL%2bfMt7Nnzved3/l934znm48D%2bP7zFVy5EMSlD3zoen0RX75JeMPd%2bILQ/ZYXfe8soe/dErrJr563vei1bNR7ePBD3xp%2b%2bm4L175aw4XGB/ik6aHrwX5cPLeAwfM%2bXHrfJzb305fnaXO9GCLb5Y/8GHyPAjBxXcKtHyPg/vZNGb%2bM/BsgiX6y3D8tJm9Iwi8LkzfIdv2gzYP/efPkcipisTiiSgxqvgDDAAzdPFXohCObzazrRkWe7THIY13Xwf3ec02TYPVOw5pXF2Av1VwGk5Pj%2bO3X25iYuIWJ8TGM3BzB2NjPwh4M%2bsW6DEPb%2b59TaxRHYPb%2bX1hb30AkEkYylbYFwXScctacpm2DDRpsR5LYDMWwsRWntcjw%2bjeFbX0rhp1U8TAhSmMH1icCkMmkkc1mkc/loGlaRQJgn88syvTQO0B2Cti9V%2bqL9wFttgQe63M0LtvUGXGfSTDSf8DYJZtplIJ4wjWKAEzdu4u1jQ3IsoRoNFrBAOilnUuNQ/O%2bCNXbgvzCWeQEGpGdb6RrwmJpzLDs6uJZYLkFqblG7Mx/SJMU9o7AiQNQLBZRKKhIp1PIEgsqH4AJ5B6%2bBGWmCdJUPaQ/GxC%2bW4/N389Anm5AdKaR7A3YvHMGEbLzb3xtBF%2bB7m%2bCvnqeaeQMA46aoGJnv0xbZB8AkQFAuUr4FpCHS1CG98dHwIwQwl/DVK6VBdQhBhxWxsowYH%2bxBqmeRutnUALaE8QnBU9qOiGCp9JsAY3HY5ibm4V3yYuFhXmoqmrbzWO778gGeU7P//0AcN2RSqWQI70pFAoi87Dt%2bNAOMNU1AbAHIhTaItHNlI%2bE8USwF26uCoC12Hw%2bT86nsZvdJSakhUP822OdN/fHrmMAn1trsTs7CTr7C1jy%2bRAIBI7tjP33fb2A%2b44A7yALYTKZFExgFrAOHIb93Gsa1xD0PzmPaDhXDqhLNYBbJBJBaDsESZKwQ4E4qh2gv24Ip5VQHqHVrPsCYE%2bDrP6KIhMUKFR6Mxvi8QQhLkpxRiKRwOEahesHp4u1ZyKCGaJ9MOCnt751BJeXsbK6gnUeBwPw%2bZbgJ10IbW/vseA/EwBLtPhM8%2b7zzvNu85voUffzO4qFQqFIWUBDeD2DzeW0%2bzWAU2GSiiEWQfvHmMe1IunfbhKOleunGgDL0enpaXR0dKCnpwfd3d0CQ0NDGBwcRH9/P/oH%2bkU/QD3bent70dnZia6uLlzs/AxXrg4f%2bG7hmgAw9bmNjo6iqqoKdXV1qKmpQW3dC2h/rR1t59rQ3NyM1tZWQgva2l5Fe3s76uvr8Rzd93xtLaqrq%2bmeFlFCu7YS5CwQDochy4rQAlmWxTWnRsajY7qXsoasSJQ2I0I3XFgJPqresRilvFgp7XF1GAqFyBajwigpgiLJEmUMKptjVD3KBhISvQcUnTv/z4wBlh6wuvOrsAVmBvdMb%2b7zah5aUUOxoAsUVF18HjdNw70MOPxecFIWuYYB/8SEp4GTQfgbDM93Zz8kNRQAAAAASUVORK5CYII=' /%3e%3c/svg%3e" width="1351" alt="Erreur de saisie du mot de passe" data-srcset="/assets/static/nuxt_auth_register_error.82a2fbd.a2874b95cedf938d0b3e422b1e4a9c1f.png 480w, /assets/static/nuxt_auth_register_error.cbab2cf.a2874b95cedf938d0b3e422b1e4a9c1f.png 1024w, /assets/static/nuxt_auth_register_error.bb33948.a2874b95cedf938d0b3e422b1e4a9c1f.png 1351w" data-sizes="(max-width: 1351px) 100vw, 1351px" data-src="/assets/static/nuxt_auth_register_error.bb33948.a2874b95cedf938d0b3e422b1e4a9c1f.png"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/nuxt_auth_register_error.bb33948.a2874b95cedf938d0b3e422b1e4a9c1f.png" width="1351" alt="Erreur de saisie du mot de passe"></noscript></p>
<h2>Observation des cookies</h2>
<p>Lors de la connexion sur la page, un cookie est cr√©√© et se nomme "auth.strategy" avec la valeur "local". Une fois la connexion √©tablie, 2 autres cookies font leurs apparitions :</p>
<ul>
<li>"auth_token.local" avec pour valeur le token JWT ;</li>
<li>"auth.refresh_token_local" avec pour valeur "false" car aucune route n'a √©t√© √©tablie.</li>
</ul>
<p>Puis lors de la d√©connexion, le cookie "auth_token.local" aura pour valeur "false".</p>
<p>Le cookie n'est pas sp√©cifi√© comme √©tant s√©curis√©. Rien d'anormal, par d√©faut, on est en HTTP et non en HTTPS. En revanche si vous avez du HTTPS, il est fort recommand√© d'ajouter aux param√®tres du cookie la ligne ci-dessous.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript">secure<span class="token operator">:</span> <span class="token boolean">true</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<h2>Conclusion</h2>
<p>N'oubliez pas en production de sp√©cifier que votre application utilise des cookies...</p>
<ul>
<li><a href="https://auth.nuxtjs.org" target="_blank" rel="nofollow noopener noreferrer">https://auth.nuxtjs.org</a> ;</li>
<li><a href="https://scotch.io/tutorials/implementing-authentication-in-nuxtjs-app" target="_blank" rel="nofollow noopener noreferrer">https://scotch.io/tutorials/implementing-authentication-in-nuxtjs-app</a> ;</li>
<li><a href="https://en.wikipedia.org/wiki/JSON_Web_Token" target="_blank" rel="nofollow noopener noreferrer">https://en.wikipedia.org/wiki/JSON_Web_Token</a> ;</li>
<li><a href="https://github.com/nuxt-community/awesome-nuxt" target="_blank" rel="nofollow noopener noreferrer">Liste de course pour Nuxt</a>.</li>
</ul>
</article></div></div></main><footer class="text-white mt-4"><ul class="nav nav-pills justify-content-center"><li><a href="https://github.com/etienner" target="_blank" rel="noopener" class="nav-link">Github</a></li><li><a href="https://medium.com/@etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Medium</a></li><li><a href="https://twitter.com/etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Twitter</a></li></ul></footer></div>
    <script src="/assets/js/app.57e0f4bd.js" defer></script><script src="/assets/js/page--src--templates--post-vue.619d8641.js" defer></script>
  </body>
</html>
