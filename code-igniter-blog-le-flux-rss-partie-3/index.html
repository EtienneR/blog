<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>CodeIgniter Blog : le flux RSS (partie 3) - https://etienner.github.io</title><meta name="gridsome:hash" content="f62c6c6cc572da4535ce1c5d24fae4305ad17d6a"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.11"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Le flux RSS (Really Simple Syndication) permet à vos visiteurs de garder le contact avec votre blog. 
Vous pouvez aussi diffuser votre flux RSS de syndication sur des services Web comme Facebook, Linkedin"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="CodeIgniter Blog : le flux RSS (partie 3)"><meta data-vue-tag="ssr" property="og:description" content="Le flux RSS (Really Simple Syndication) permet à vos visiteurs de garder le contact avec votre blog. 
Vous pouvez aussi diffuser votre flux RSS de syndication sur des services Web comme Facebook, Linkedin"><meta data-vue-tag="ssr" property="og:url" content="https://etienner.github.io/code-igniter-blog-le-flux-rss-partie-3/"><meta data-vue-tag="ssr" name="twitter:domain" content="https://etienner.github.io"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="CodeIgniter Blog : le flux RSS (partie 3)"><meta data-vue-tag="ssr" name="twitter:description" content="Le flux RSS (Really Simple Syndication) permet à vos visiteurs de garder le contact avec votre blog. 
Vous pouvez aussi diffuser votre flux RSS de syndication sur des services Web comme Facebook, Linkedin"><meta data-vue-tag="ssr" name="twitter:site" content="@etiennerouzeaud"><meta data-vue-tag="ssr" name="twitter:creator" content="@etiennerouzeaud"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.dd5ac703.css" as="style"><link rel="preload" href="/assets/js/app.8edfcdd1.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.5669e3ec.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.0043f220.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.bb47b8d4.js"><link rel="stylesheet" href="/assets/css/0.styles.dd5ac703.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header><div class="container text-center"><strong><a href="/" title="Accueil" class="active">Etienne ROUZEAUD - Développeur Web</a></strong></div></header><div class="title"><h1 class="display-4 text-center">CodeIgniter Blog : le flux RSS (partie 3)</h1></div><div class="container"><div class="row"><div class="mt-4 col-lg-2"><p><em><span>05 février 2014</span></em></p></div><article class="mt-4 col-lg-10"><p>Le flux RSS (Really Simple Syndication) permet à vos visiteurs de garder le contact avec votre blog.<br>
Vous pouvez aussi diffuser votre flux RSS de syndication sur des services Web comme Facebook, Linkedin, etc...</p>
<h2 id="objectif"><a href="#objectif" aria-hidden="true"><span class="icon icon-link"></span></a>Objectif</h2>
<p>Afficher le flux RSS des 10 derniers articles, à l'adresse suivante : <a href="http://mon-blog.com/feed" target="_blank" rel="nofollow noopener noreferrer">http://mon-blog.com/feed</a></p>
<ul>
<li>1 contrôleur</li>
<li>1 modèle</li>
<li>1 vue</li>
<li>modification du fichier routes.php</li>
</ul>
<h2 id="le-contrôleur-feed"><a href="#le-contr%C3%B4leur-feed" aria-hidden="true"><span class="icon icon-link"></span></a>Le contrôleur "Feed"</h2>
<p>Dans le dossier <code class="language-text">application/controllers/front</code>, créez un nouveau contrôleur "feed.php".</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">defined</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'BASEPATH'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'No direct script access allowed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Feed</span> <span class="token keyword">extends</span> <span class="token class-name">CI_Controller</span><span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token scope"><span class="token keyword">parent</span><span class="token punctuation">::</span></span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Chargement des ressources pour ce controller</span>
        <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">load</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">database</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">load</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">model</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'front/model_feed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">load</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">helper</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'url'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'xml'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'site_name'</span><span class="token punctuation">]</span>        <span class="token operator">=</span> <span class="token single-quoted-string string">'Mon blog'</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'site_link'</span><span class="token punctuation">]</span>        <span class="token operator">=</span> <span class="token function">base_url</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'site_description'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Les flux RSS de mes articles'</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'encoding'</span><span class="token punctuation">]</span>         <span class="token operator">=</span> <span class="token single-quoted-string string">'utf-8'</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'feed_url'</span><span class="token punctuation">]</span>         <span class="token operator">=</span> <span class="token function">base_url</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/feed'</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'page_language'</span><span class="token punctuation">]</span>    <span class="token operator">=</span> <span class="token single-quoted-string string">'fr-fr'</span><span class="token punctuation">;</span>
        <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">]</span>            <span class="token operator">=</span> <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">model_feed</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">getRecentPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">header</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Content-Type: application/rss+xml"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">load</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'front/view_feed'</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token comment">/* End of file feed.php */</span>
<span class="token comment">/* Location: ./application/controllers/front/feed.php */</span></span></code></pre>
<p>On met en place les variables que l'on placera dans le header du flux RSS :</p>
<ul>
<li>le nom du site</li>
<li>l'encodage</li>
<li>l'url du flux rss</li>
<li>la description du flux</li>
</ul>
<p>Puis on récupère les données dans le modèle et on précise le content type du header (ou MIME) avec pour type "application" et en sous type "rss+xml".</p>
<h2 id="le-modèle-model_feed"><a href="#le-mod%C3%A8le-model_feed" aria-hidden="true"><span class="icon icon-link"></span></a>Le modèle "Model_feed"</h2>
<p>Dans le dossier <code class="language-text">application/models/front</code>, créez un nouveau modèle "model_feed.php".</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token operator">!</span> <span class="token function">defined</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'BASEPATH'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">exit</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'No direct script access allowed'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Model_feed</span> <span class="token keyword">extends</span> <span class="token class-name">CI_Model</span><span class="token punctuation">{</span>

    <span class="token keyword">function</span> <span class="token function">getRecentPosts</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">select</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'c_title, c_content, c_cdate, c_url_rw, r_title, r_description, r_url_rw'</span><span class="token punctuation">)</span>
                 <span class="token operator">-</span><span class="token operator">></span><span class="token function">from</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'content'</span><span class="token punctuation">)</span>
                 <span class="token operator">-</span><span class="token operator">></span><span class="token function">join</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'rubric'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'rubric.r_id = content.r_id'</span><span class="token punctuation">)</span>
                 <span class="token operator">-</span><span class="token operator">></span><span class="token function">order_by</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'c_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'DESC'</span><span class="token punctuation">)</span>
                 <span class="token operator">-</span><span class="token operator">></span><span class="token function">limit</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$query</span> <span class="token operator">=</span> <span class="token this">$this</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">db</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>


<span class="token comment">/* End of file model_feed.php */</span>
<span class="token comment">/* Location: ./application/models/front/model_feed.php */</span></span></code></pre>
<h2 id="la-vue-view_feed"><a href="#la-vue-view_feed" aria-hidden="true"><span class="icon icon-link"></span></a>La vue "view_feed"</h2>
<p>Dans le dossier <code class="language-text">application/views/front</code> créez un nouvelle vue "view_rss.php".</p>
<pre class="language-php"><code class="language-php"><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token single-quoted-string string">'&lt;?xml version="1.0" encoding="'</span> <span class="token punctuation">.</span> <span class="token variable">$encoding</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'"?>'</span> <span class="token punctuation">.</span> <span class="token double-quoted-string string">""</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>rss</span> <span class="token attr-name">version</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>2.0<span class="token punctuation">"</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>dc</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://purl.org/dc/elements/1.1/<span class="token punctuation">"</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>sy</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://purl.org/rss/1.0/modules/syndication/<span class="token punctuation">"</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>admin</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://webns.net/mvcb/<span class="token punctuation">"</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>rdf</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://www.w3.org/1999/02/22-rdf-syntax-ns#<span class="token punctuation">"</span></span>
   <span class="token attr-name"><span class="token namespace">xmlns:</span>content</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>http://purl.org/rss/1.0/modules/content/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>channel</span><span class="token punctuation">></span></span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$site_description</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$site_link</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$site_name</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dc:</span>language</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$page_language</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dc:</span>language</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">dc:</span>rights</span><span class="token punctuation">></span></span>Copyright <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">gmdate</span><span class="token punctuation">(</span><span class="token double-quoted-string string">"Y"</span><span class="token punctuation">,</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">dc:</span>rights</span><span class="token punctuation">></span></span>

        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$posts</span><span class="token operator">-</span><span class="token operator">></span><span class="token function">result</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$post</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token delimiter important">?></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>item</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">xml_convert</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_title</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">base_url</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">r_url_rw</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/'</span> <span class="token punctuation">.</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_url_rw</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>link</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>guid</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">base_url</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">r_url_rw</span> <span class="token punctuation">.</span> <span class="token single-quoted-string string">'/'</span> <span class="token punctuation">.</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_url_rw</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>guid</span><span class="token punctuation">></span></span>
            <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_content</span> <span class="token operator">=</span> <span class="token function">strip_tags</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_content</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>
                <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_content</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span>
            <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token variable">$date</span> <span class="token operator">=</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_cdate</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Conversion date to timestamp </span><span class="token delimiter important">?></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pubDate</span><span class="token punctuation">></span></span><span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'r'</span><span class="token punctuation">,</span> <span class="token variable">$date</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token delimiter important">?></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pubDate</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>item</span><span class="token punctuation">></span></span>
        <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">endforeach</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>channel</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>rss</span><span class="token punctuation">></span></span></code></pre>
<p>On se base sur la version RSS 2 qui est au format XML.</p>
<p>Si vous souhaitez afficher uniquement les 256 premiers caractères de l'article, remplacez la ligne suivante :</p>
<pre class="language-php"><code class="language-php"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_content</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span></code></pre>
<p>Par le code ci-dessous :</p>
<pre class="language-php"><code class="language-php"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>description</span><span class="token punctuation">></span></span>
    <span class="token php language-php"><span class="token delimiter important">&lt;?php</span> <span class="token keyword">echo</span> <span class="token function">character_limiter</span><span class="token punctuation">(</span><span class="token variable">$post</span><span class="token operator">-</span><span class="token operator">></span><span class="token property">c_content</span><span class="token punctuation">,</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token delimiter important">?></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>description</span><span class="token punctuation">></span></span></code></pre>
<p>Il faudra alors appeler le helper "text" dans le constructeur du contrôleur "Feed" dans le contrôleur pour que la fonction "character_limiter" fonctionne.</p>
<h2 id="routage"><a href="#routage" aria-hidden="true"><span class="icon icon-link"></span></a>Routage</h2>
<p>Dans le fichier de routage (<code class="language-text">application/config/routes.php</code>) ajoutez après la route du "default_controller" :</p>
<pre class="language-php"><code class="language-php"><span class="token shell-comment comment"># RSS</span>
<span class="token variable">$route</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'feed'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'front/feed'</span><span class="token punctuation">;</span></code></pre>
</article></div></div><footer class="text-white mt-4"><ul class="nav nav-pills justify-content-center"><li><a href="https://github.com/etienner" target="_blank" class="nav-link">Github</a></li><li><a href="https://medium.com/@etiennerouzeaud" target="_blank" class="nav-link">Medium</a></li><li><a href="https://twitter.com/etiennerouzeaud" target="_blank" class="nav-link">Twitter</a></li></ul></footer></div>
    <script src="/assets/js/app.8edfcdd1.js" defer></script><script src="/assets/js/page--src-templates-post-vue.5669e3ec.js" defer></script>
  </body>
</html>
