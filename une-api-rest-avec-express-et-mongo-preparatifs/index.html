<!DOCTYPE html>
<html data-html-server-rendered="true" lang="fr" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22fr%22%7D%7D">
  <head>
    <title>Une API REST avec Express et Mongo : Pr√©paratifs - https://etienner.github.io</title><meta name="gridsome:hash" content="e9e710b63b02d049a9f8a5359c5c22618737fe2f"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Ensemble, nous allons construire une API REST propuls√©e par Express.js et Mongo. Cette API communiquera uniquement au format JSON. Ce tutoriel est destin√© √† un public connaissant les bases en JavaScript"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Une API REST avec Express et Mongo : Pr√©paratifs"><meta data-vue-tag="ssr" property="og:description" content="Ensemble, nous allons construire une API REST propuls√©e par Express.js et Mongo. Cette API communiquera uniquement au format JSON. Ce tutoriel est destin√© √† un public connaissant les bases en JavaScript"><meta data-vue-tag="ssr" property="og:url" content="https://etienner.github.io/une-api-rest-avec-express-et-mongo-preparatifs/"><meta data-vue-tag="ssr" name="twitter:domain" content="https://etienner.github.io"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Une API REST avec Express et Mongo : Pr√©paratifs"><meta data-vue-tag="ssr" name="twitter:description" content="Ensemble, nous allons construire une API REST propuls√©e par Express.js et Mongo. Cette API communiquera uniquement au format JSON. Ce tutoriel est destin√© √† un public connaissant les bases en JavaScript"><meta data-vue-tag="ssr" name="twitter:site" content="@etiennerouzeaud"><meta data-vue-tag="ssr" name="twitter:creator" content="@etiennerouzeaud"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.a80f6262.css" as="style"><link rel="preload" href="/assets/js/app.8917d561.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.93f54eeb.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.5bf39404.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.1fdd30a3.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.8311241e.js"><link rel="stylesheet" href="/assets/css/0.styles.a80f6262.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header class="py-2 text-center"><strong><a href="/" title="Accueil" class="active">Etienne ROUZEAUD - D√©veloppeur Web</a></strong></header><main><div class="title py-2 text-center" data-v-4b217994><h1 class="display-5 pt-2" data-v-4b217994>Une API REST avec Express et Mongo : Pr√©paratifs</h1><!----></div><div class="container"><div class="row sidebar"><div class="mt-4 col-lg-2"><p><em><span>30 avril 2020</span></em></p><ul class="list-unstyled"><li>
            üè∑Ô∏è <a href="/tag/API/">API</a></li><li>
            üè∑Ô∏è <a href="/tag/Mongo/">Mongo</a></li><li>
            üè∑Ô∏è <a href="/tag/Docker/">Docker</a></li></ul><p>‚åö 6 mins de lecture</p><p><a href="https://github.com/EtienneR/api_rest_express_mongo_docker" target="_blank" rel="noopener">
            üíæ T√©l√©chargement
          </a></p></div><div class="col-lg-10 mt-4"><ul class="list-group mb-4"><li class="list-group-item disabled">
            Partie 1 :
            <span>Une API REST avec Express et Mongo : Pr√©paratifs</span></li><li class="list-group-item">
            Partie 2 :
            <span><a href="/une-api-rest-avec-express-et-mongo-developpement">Une API REST avec Express et Mongo : D√©veloppement</a></span></li><li class="list-group-item">
            Partie 3 :
            <span><a href="/une-api-rest-avec-express-et-mongo-tests-automatises">Une API REST avec Express et Mongo : Tests automatis√©s</a></span></li></ul><article><p>Ensemble, nous allons construire une API REST propuls√©e par Express.js et Mongo. Cette API communiquera uniquement au format JSON. Ce tutoriel est destin√© √† un public connaissant les bases en JavaScript et en HTTP. Express est un framework (un des plus connu) sur Node.js. Il permet de cr√©er des applications Web de fa√ßon simplifi√©e. Quant √† Mongo, c‚Äôest une base de donn√©es dite ‚Äúnosql‚Äù. Pas de panique, nous allons voir ensemble, les requ√™tes basiques (cr√©er, lire, modifier et supprimer des donn√©es) via Mongoose. De plus cette API sera encapsul√©e dans Docker afin de faciliter son int√©gration continue. Libre √† vous ne pas utiliser cet outil de virtualisation.</p>
<p>Avant de se lancer √† bras ouverts dans la cr√©ation de notre API REST, mettons en place notre stack technique. Pour cela on aura 2 services distincts :</p>
<ul>
<li>La base de donn√©es : Mongo ;</li>
<li>L'application back-end : l'API.</li>
</ul>
<h2>Installation des modules</h2>
<p>En premier lieu, assurez-vous d‚Äôavoir Node et NPM install√©s sur votre machine.<br>
<code class="language-text">node -v &amp;&amp; npm -v</code></p>
<p>Si ce n‚Äôest pas le cas, rendez-vous sur le site officiel <a href="https://nodejs.org/en/download" target="_blank" rel="nofollow noopener noreferrer">https://nodejs.org/en/download</a>.</p>
<p>‚ÑπÔ∏è Ce tutoriel a √©t√© r√©dig√© avec la version de 12.16.3 de Node et 6.14.4 de NPM.</p>
<p>Cr√©ez un nouveau dossier <strong>services</strong> puis √† l‚Äôint√©rieur, un nouveau dossier <strong>api</strong>.</p>
<p><code class="language-text">mkdir services &amp;&amp; cd services &amp;&amp; mkdir api &amp;&amp; cd api</code></p>
<p>Lancez la commande ci-dessous pour initialiser l‚Äôapplication.</p>
<p><code class="language-text">npm init -y</code></p>
<p>Outre Express, nous allons utiliser un ensemble de modules r√©f√©renc√©s dans le tableau ci-dessous.</p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Description</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Express</td>
<td>Framework Web</td>
<td>4.17.1</td>
</tr>
<tr>
<td>Mongoose</td>
<td>Connecteur MongoDB et ODM (Object Document Mapper : √©quivalent d‚Äôun ORM pour BDD no-sql)</td>
<td>5.7.1</td>
</tr>
</tbody>
</table>
<p><code class="language-text">npm install express mongoose morgan supertest</code></p>
<p>Ces paquets appara√Ætront dans la cat√©gorie <strong>dependencies</strong> (d√©pendances utiles √† un fonctionnement en production).</p>
<p>Si vous utilisez une version de NPM inf√©rieure √† la 5, utilisez le flag <code class="language-text">--save</code> pour avoir ces modules dans le manifeste.</p>
<table>
<thead>
<tr>
<th>Nom</th>
<th>Description</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jest</td>
<td>Tests automatis√©s</td>
<td>25.3.0</td>
</tr>
<tr>
<td>Morgan</td>
<td>Afficher les logs dans le terminal</td>
<td>1.10.0</td>
</tr>
<tr>
<td>Nodemon</td>
<td>Service de red√©marrage automatique</td>
<td>2.0.3</td>
</tr>
<tr>
<td>Supertest</td>
<td>Effectuer des tests avec HTTP</td>
<td>4.0.2</td>
</tr>
</tbody>
</table>
<p><code class="language-text">npm install jest morgan nodemon supertest --save-dev</code></p>
<p>Ces paquets appara√Ætront dans la cat√©gorie <strong>devDependencies</strong> (d√©pendances utiles uniquement dans le cadre du d√©veloppement).</p>
<p>Vous pouvez retrouver toutes ces informations dans le manifeste <strong>package.json</strong>.</p>
<p>Modifiez ce fichier en ajoutant une commande pour ex√©cuter Nodemon.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token string">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token string">"dev"</span><span class="token operator">:</span> <span class="token string">"node_modules/.bin/nodemon"</span><span class="token punctuation">,</span>
  <span class="token string">"test"</span><span class="token operator">:</span> <span class="token string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Environnement de d√©veloppement</h2>
<p>A la racine du projet, cr√©ez un fichier <strong>.dev.env</strong>. Comme son nom l‚Äôindique, ce fichier ne servira que pour l‚Äôenvironnement de d√©veloppement.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token assign-left variable">NODE_ENV</span><span class="token operator">=</span>development

<span class="token assign-left variable">API_HOST</span><span class="token operator">=</span><span class="token number">0.0</span>.0.0
<span class="token assign-left variable">API_PORT</span><span class="token operator">=</span><span class="token number">3000</span>

<span class="token assign-left variable">MONGO_HOST</span><span class="token operator">=</span>mongo
<span class="token assign-left variable">MONGO_PORT</span><span class="token operator">=</span><span class="token number">27017</span>
<span class="token assign-left variable">MONGO_INITDB_DATABASE</span><span class="token operator">=</span>mydatabase
<span class="token assign-left variable">MONGO_INITDB_ROOT_USERNAME</span><span class="token operator">=</span>root
<span class="token assign-left variable">MONGO_INITDB_ROOT_PASSWORD</span><span class="token operator">=</span>password</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Dans un premier temps, on d√©clare l‚ÄôURL et le port du serveur de notre API. Et dans un second temps, les informations relatives √† notre BDD (adresse, port, nom de la base, nom de l‚Äôutilisateur et mot de passe).</p>
<h2>Premi√®re route</h2>
<p>A la racine du dossier <strong>api</strong>, cr√©ez le fichier <strong>index.js</strong>.</p>
<div class="gridsome-highlight" data-language="javascript"><pre style="counter-reset: linenumber NaN" class="language-javascript line-numbers"><code class="language-javascript"><span class="token comment">// Appel des modules</span>
<span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> morgan <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'morgan'</span><span class="token punctuation">)</span>

<span class="token comment">// Variables d'environnement</span>
<span class="token keyword">const</span> host <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">API_HOST</span> <span class="token operator">||</span> <span class="token string">'0.0.0.0'</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">API_PORT</span> <span class="token operator">||</span> <span class="token number">3000</span>

<span class="token comment">// Initialisation d'Express</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// Activation du log des routes</span>
app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token function">morgan</span><span class="token punctuation">(</span><span class="token string">'tiny'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// Route d'accueil</span>
app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'Hello World!'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// Routes non d√©finies = 404</span>
app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'/*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">{</span> message<span class="token operator">:</span> <span class="token string">'page not found'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// D√©marrage du serveur</span>
app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> host<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>
    <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Running on http://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>host<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">:</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - Environnement : </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p><strong>req</strong> est le diminutif de <strong>request</strong> et <strong>res</strong> de <strong>response</strong>. Le 1^er^ concerne tout ce qui rentre (donn√©es saisies par l‚Äôutilisateur par exemple) et le second tout ce que retourne le serveur. Ici, une r√©ponse (en 200 par d√©faut) au format JSON.</p>
<p>‚ÑπÔ∏è Les lignes concernant l‚Äôadresse et le port (6 et 7), la condition ‚Äúou‚Äù (symbolis√©e par les doubles pipes) permet de d√©finir une valeur si le fichier d‚Äôenvironnement est inexistant.</p>
<p>Vous pouvez lancer le serveur Nodemon en allant dans le r√©pertoire API afin de lancer la commande ci-dessous.</p>
<p><code class="language-text">npm run dev</code></p>
<p>Extrait de la console.</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash"><span class="token operator">></span> nodemon

<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> <span class="token number">2.0</span>.3
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> to restart at any time, enter <span class="token variable"><span class="token variable">`</span>rs<span class="token variable">`</span></span>
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> watching path<span class="token punctuation">(</span>s<span class="token punctuation">)</span>: *.*
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> watching extensions: js,mjs,json
<span class="token punctuation">[</span>nodemon<span class="token punctuation">]</span> starting <span class="token variable"><span class="token variable">`</span>node index.js<span class="token variable">`</span></span>
Running on http://0.0.0.0:3000 - Environnement <span class="token builtin class-name">:</span> undefined
GET / <span class="token number">200</span> <span class="token number">26</span> - <span class="token number">4.811</span> ms
GET /fake <span class="token number">404</span> <span class="token number">28</span> - <span class="token number">0.802</span> ms</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Puis l‚Äôarr√™ter avec la combinaison des touches CTRL + C car nous allons utiliser Docker.</p>
<h2>Dockerisons</h2>
<p>Cette √©tape de configuration des containers n√©cessite du temps. Pour autant, elle n‚Äôest pas n√©gligeable car elle permettra par la suite, √† n‚Äôimporte quel d√©veloppeur souhaitant participer √† ce projet d‚Äôen gagner. Pour ce faire, nous allons cr√©er 2 containers distincts √† partir de 2 images distinctes. Le premier pour la BDD et le second, pour l‚ÄôAPI.
Avant de poursuivre, v√©rifiez que Docker et Docker Compose sont install√©s sur votre machine.  </p>
<p><code class="language-text">docker version &amp;&amp; docker-compose version</code></p>
<p>Si ce n‚Äôest pas le cas, rendez-vous sur le site officiel <a href="https://docs.docker.com/install/#releases" target="_blank" rel="nofollow noopener noreferrer">https://docs.docker.com/install/#releases</a> et <a href="https://docs.docker.com/compose/install/#install-compose" target="_blank" rel="nofollow noopener noreferrer">https://docs.docker.com/compose/install/#install-compose</a></p>
<p>‚ÑπÔ∏è Ce tutoriel a √©t√© r√©dig√© avec la version 19.03.8 de Docker et 1.17.1 de Docker Compose.</p>
<p>A la racine de votre application, cr√©ez un fichier nomm√© <strong>docker-compose.yml</strong>.</p>
<h3>Service Mongo</h3>
<p>Pour la base de donn√©es, c‚Äôest relativement rapide car il existe d√©j√† une image officielle toute pr√™te pour MongoDB.</p>
<div class="gridsome-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">'3'</span>

<span class="token key atrule">services</span><span class="token punctuation">:</span>
  <span class="token key atrule">mongo</span><span class="token punctuation">:</span>
    <span class="token key atrule">image</span><span class="token punctuation">:</span> mongo<span class="token punctuation">:</span>4.2.5<span class="token punctuation">-</span>bionic
    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
    <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./.dev.env
    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> ./services/mongo/data<span class="token punctuation">:</span>/data/db
    <span class="token key atrule">ports</span><span class="token punctuation">:</span>
      <span class="token punctuation">-</span> 27017<span class="token punctuation">:</span><span class="token number">27017</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Nous utiliserons la version 4 de Mongo. On veut que le container red√©marre √† chaque d√©marrage de Docker (donc √† chaque red√©marrage de votre machine). On veut que le fichier d‚Äôenvironnement <strong>.dev.env</strong> soit pris en compte. On utilise le port par d√©faut de Mongo 27017. On veut aussi stocker les donn√©es de la BDD dans le dossier <strong>services/mongo/data</strong>.</p>
<p>‚ÑπÔ∏è Ce dossier sera cr√©√© automatiquement lors de la premi√®re construction du container.</p>
<h3>Service API</h3>
<p>Quant √† l‚ÄôAPI il existe √©galement une image officielle pour Node.js (de pr√©f√©rence, la version Alpine pour avoir une image l√©g√®re). Dans le dossier <strong>api</strong>, cr√©ez un nouveau fichier <strong>Dockerfile</strong>.</p>
<div class="gridsome-highlight" data-language="dockerfile"><pre style="counter-reset: linenumber NaN" class="language-dockerfile line-numbers"><code class="language-dockerfile"><span class="token keyword">FROM</span> node<span class="token punctuation">:</span>12.16.3<span class="token punctuation">-</span>alpine
<span class="token keyword">COPY</span> . /app
<span class="token keyword">WORKDIR</span> /app
<span class="token keyword">RUN</span> npm install
<span class="token keyword">VOLUME</span> /app</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Puis dans le fichier <strong>docker-compose.yml</strong>, √† la suite, en tant que service (en respectant bien l‚Äôindentation) et d√©pendant du service ‚Äúmongo‚Äù.</p>
<div class="gridsome-highlight" data-language="yml"><pre style="counter-reset: linenumber NaN" class="language-yml line-numbers"><code class="language-yml"><span class="token key atrule">api</span><span class="token punctuation">:</span>
  <span class="token key atrule">build</span><span class="token punctuation">:</span> ./services/api
  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always
  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ./services/api<span class="token punctuation">:</span>/app
  <span class="token key atrule">ports</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> 3000<span class="token punctuation">:</span><span class="token number">3000</span>
  <span class="token key atrule">env_file</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> ./.dev.env
  <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>
    <span class="token punctuation">-</span> mongo
  <span class="token key atrule">command</span><span class="token punctuation">:</span> npm run dev</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Nos 2 containers √©tant d√©clar√©s dans le fichier d‚Äôinstructions, lancez la commande ci-dessous.</p>
<p><code class="language-text">docker-compose up -d</code></p>
<p>Cette commande va t√©l√©charger les 2 images depuis le Docker Hub puis cr√©er nos 2 containers.<br>
Vous pouvez √©galement acc√©der au serveur Mongo depuis votre terminal.</p>
<p><code class="language-text">docker-compose exec mongo bash</code></p>
<p>Puis l'authentification.</p>
<p><code class="language-text">mongo -u root -p password --authenticationDatabase admin</code></p>
<p>C'est bon, vous y √™tes m√™me si dans ce tutoriel, on n'aura pas vocation √† toucher √† cette partie.<br>
Et le plus important √©tant d'afficher les logs.</p>
<p><code class="language-text">docker-compose logs -f</code></p>
<p>‚ÑπÔ∏è Si vous n‚Äôutilisez pas Docker, vous pouvez vous servir du package <a href="https://www.npmjs.com/package/dotenv" target="_blank" rel="nofollow noopener noreferrer">Dotenv</a> pour lire le fichier d‚Äôenvironnement.</p>
<h2>Conclusion</h2>
<p>On est par√© au d√©veloppement pour la seconde partie de ce tutoriel.</p>
</article></div></div></div></main><footer class="text-white mt-4"><ul class="nav nav-pills justify-content-center"><li><a href="https://github.com/etienner" target="_blank" rel="noopener" class="nav-link">Github</a></li><li><a href="https://medium.com/@etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Medium</a></li><li><a href="https://twitter.com/etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Twitter</a></li></ul></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Une API REST avec Express et Mongo : Pr√©paratifs","date":"30 April 2020","content":"\u003Cp\u003EEnsemble, nous allons construire une API REST propuls√©e par Express.js et Mongo. Cette API communiquera uniquement au format JSON. Ce tutoriel est destin√© √† un public connaissant les bases en JavaScript et en HTTP. Express est un framework (un des plus connu) sur Node.js. Il permet de cr√©er des applications Web de fa√ßon simplifi√©e. Quant √† Mongo, c‚Äôest une base de donn√©es dite ‚Äúnosql‚Äù. Pas de panique, nous allons voir ensemble, les requ√™tes basiques (cr√©er, lire, modifier et supprimer des donn√©es) via Mongoose. De plus cette API sera encapsul√©e dans Docker afin de faciliter son int√©gration continue. Libre √† vous ne pas utiliser cet outil de virtualisation.\u003C\u002Fp\u003E\n\u003Cp\u003EAvant de se lancer √† bras ouverts dans la cr√©ation de notre API REST, mettons en place notre stack technique. Pour cela on aura 2 services distincts :\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003ELa base de donn√©es : Mongo ;\u003C\u002Fli\u003E\n\u003Cli\u003EL'application back-end : l'API.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2\u003EInstallation des modules\u003C\u002Fh2\u003E\n\u003Cp\u003EEn premier lieu, assurez-vous d‚Äôavoir Node et NPM install√©s sur votre machine.\u003Cbr\u003E\n\u003Ccode class=\"language-text\"\u003Enode -v &amp;&amp; npm -v\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESi ce n‚Äôest pas le cas, rendez-vous sur le site officiel \u003Ca href=\"https:\u002F\u002Fnodejs.org\u002Fen\u002Fdownload\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fnodejs.org\u002Fen\u002Fdownload\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E‚ÑπÔ∏è Ce tutoriel a √©t√© r√©dig√© avec la version de 12.16.3 de Node et 6.14.4 de NPM.\u003C\u002Fp\u003E\n\u003Cp\u003ECr√©ez un nouveau dossier \u003Cstrong\u003Eservices\u003C\u002Fstrong\u003E puis √† l‚Äôint√©rieur, un nouveau dossier \u003Cstrong\u003Eapi\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Emkdir services &amp;&amp; cd services &amp;&amp; mkdir api &amp;&amp; cd api\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ELancez la commande ci-dessous pour initialiser l‚Äôapplication.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Enpm init -y\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EOutre Express, nous allons utiliser un ensemble de modules r√©f√©renc√©s dans le tableau ci-dessous.\u003C\u002Fp\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003ENom\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003Cth\u003EVersion\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003EExpress\u003C\u002Ftd\u003E\n\u003Ctd\u003EFramework Web\u003C\u002Ftd\u003E\n\u003Ctd\u003E4.17.1\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003EMongoose\u003C\u002Ftd\u003E\n\u003Ctd\u003EConnecteur MongoDB et ODM (Object Document Mapper : √©quivalent d‚Äôun ORM pour BDD no-sql)\u003C\u002Ftd\u003E\n\u003Ctd\u003E5.7.1\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Enpm install express mongoose morgan supertest\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECes paquets appara√Ætront dans la cat√©gorie \u003Cstrong\u003Edependencies\u003C\u002Fstrong\u003E (d√©pendances utiles √† un fonctionnement en production).\u003C\u002Fp\u003E\n\u003Cp\u003ESi vous utilisez une version de NPM inf√©rieure √† la 5, utilisez le flag \u003Ccode class=\"language-text\"\u003E--save\u003C\u002Fcode\u003E pour avoir ces modules dans le manifeste.\u003C\u002Fp\u003E\n\u003Ctable\u003E\n\u003Cthead\u003E\n\u003Ctr\u003E\n\u003Cth\u003ENom\u003C\u002Fth\u003E\n\u003Cth\u003EDescription\u003C\u002Fth\u003E\n\u003Cth\u003EVersion\u003C\u002Fth\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Fthead\u003E\n\u003Ctbody\u003E\n\u003Ctr\u003E\n\u003Ctd\u003EJest\u003C\u002Ftd\u003E\n\u003Ctd\u003ETests automatis√©s\u003C\u002Ftd\u003E\n\u003Ctd\u003E25.3.0\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003EMorgan\u003C\u002Ftd\u003E\n\u003Ctd\u003EAfficher les logs dans le terminal\u003C\u002Ftd\u003E\n\u003Ctd\u003E1.10.0\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003ENodemon\u003C\u002Ftd\u003E\n\u003Ctd\u003EService de red√©marrage automatique\u003C\u002Ftd\u003E\n\u003Ctd\u003E2.0.3\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003Ctr\u003E\n\u003Ctd\u003ESupertest\u003C\u002Ftd\u003E\n\u003Ctd\u003EEffectuer des tests avec HTTP\u003C\u002Ftd\u003E\n\u003Ctd\u003E4.0.2\u003C\u002Ftd\u003E\n\u003C\u002Ftr\u003E\n\u003C\u002Ftbody\u003E\n\u003C\u002Ftable\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Enpm install jest morgan nodemon supertest --save-dev\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECes paquets appara√Ætront dans la cat√©gorie \u003Cstrong\u003EdevDependencies\u003C\u002Fstrong\u003E (d√©pendances utiles uniquement dans le cadre du d√©veloppement).\u003C\u002Fp\u003E\n\u003Cp\u003EVous pouvez retrouver toutes ces informations dans le manifeste \u003Cstrong\u003Epackage.json\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EModifiez ce fichier en ajoutant une commande pour ex√©cuter Nodemon.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"javascript\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token string\"\u003E\"scripts\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token string\"\u003E\"dev\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"node_modules\u002F.bin\u002Fnodemon\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token string\"\u003E\"test\"\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Ch2\u003EEnvironnement de d√©veloppement\u003C\u002Fh2\u003E\n\u003Cp\u003EA la racine du projet, cr√©ez un fichier \u003Cstrong\u003E.dev.env\u003C\u002Fstrong\u003E. Comme son nom l‚Äôindique, ce fichier ne servira que pour l‚Äôenvironnement de d√©veloppement.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token assign-left variable\"\u003ENODE_ENV\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Edevelopment\n\n\u003Cspan class=\"token assign-left variable\"\u003EAPI_HOST\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E0.0\u003C\u002Fspan\u003E.0.0\n\u003Cspan class=\"token assign-left variable\"\u003EAPI_PORT\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E3000\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token assign-left variable\"\u003EMONGO_HOST\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Emongo\n\u003Cspan class=\"token assign-left variable\"\u003EMONGO_PORT\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E27017\u003C\u002Fspan\u003E\n\u003Cspan class=\"token assign-left variable\"\u003EMONGO_INITDB_DATABASE\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Emydatabase\n\u003Cspan class=\"token assign-left variable\"\u003EMONGO_INITDB_ROOT_USERNAME\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Eroot\n\u003Cspan class=\"token assign-left variable\"\u003EMONGO_INITDB_ROOT_PASSWORD\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003Epassword\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EDans un premier temps, on d√©clare l‚ÄôURL et le port du serveur de notre API. Et dans un second temps, les informations relatives √† notre BDD (adresse, port, nom de la base, nom de l‚Äôutilisateur et mot de passe).\u003C\u002Fp\u003E\n\u003Ch2\u003EPremi√®re route\u003C\u002Fh2\u003E\n\u003Cp\u003EA la racine du dossier \u003Cstrong\u003Eapi\u003C\u002Fstrong\u003E, cr√©ez le fichier \u003Cstrong\u003Eindex.js\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"javascript\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"\u003E\u003Ccode class=\"language-javascript\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F Appel des modules\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E express \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'express'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E morgan \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Erequire\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'morgan'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Variables d'environnement\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E host \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E process\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eenv\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EAPI_HOST\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'0.0.0.0'\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E port \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E process\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eenv\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003EAPI_PORT\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E||\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E3000\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Initialisation d'Express\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Econst\u003C\u002Fspan\u003E app \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Eexpress\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Activation du log des routes\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Euse\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Emorgan\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'tiny'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Route d'accueil\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eget\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'\u002F'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ereq\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E res\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  res\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ejson\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E message\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'Hello World!'\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F Routes non d√©finies = 404\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Eall\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E'\u002F*'\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token parameter\"\u003Ereq\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E res\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  res\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Estatus\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E404\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Ejson\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E message\u003Cspan class=\"token operator\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'page not found'\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token comment\"\u003E\u002F\u002F D√©marrage du serveur\u003C\u002Fspan\u003E\napp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elisten\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Eport\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E host\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token operator\"\u003E=\u003E\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n  console\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003Elog\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token template-string\"\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003ERunning on http:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Ehost\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Eport\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E - Environnement : \u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation\"\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E${\u003C\u002Fspan\u003Eprocess\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003Eenv\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token constant\"\u003ENODE_ENV\u003C\u002Fspan\u003E\u003Cspan class=\"token interpolation-punctuation punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003Cspan class=\"token template-punctuation string\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003E\u003Cstrong\u003Ereq\u003C\u002Fstrong\u003E est le diminutif de \u003Cstrong\u003Erequest\u003C\u002Fstrong\u003E et \u003Cstrong\u003Eres\u003C\u002Fstrong\u003E de \u003Cstrong\u003Eresponse\u003C\u002Fstrong\u003E. Le 1^er^ concerne tout ce qui rentre (donn√©es saisies par l‚Äôutilisateur par exemple) et le second tout ce que retourne le serveur. Ici, une r√©ponse (en 200 par d√©faut) au format JSON.\u003C\u002Fp\u003E\n\u003Cp\u003E‚ÑπÔ∏è Les lignes concernant l‚Äôadresse et le port (6 et 7), la condition ‚Äúou‚Äù (symbolis√©e par les doubles pipes) permet de d√©finir une valeur si le fichier d‚Äôenvironnement est inexistant.\u003C\u002Fp\u003E\n\u003Cp\u003EVous pouvez lancer le serveur Nodemon en allant dans le r√©pertoire API afin de lancer la commande ci-dessous.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Enpm run dev\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EExtrait de la console.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003E\u003Cspan class=\"token operator\"\u003E\u003E\u003C\u002Fspan\u003E nodemon\n\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Enodemon\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E2.0\u003C\u002Fspan\u003E.3\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Enodemon\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E to restart at any time, enter \u003Cspan class=\"token variable\"\u003E\u003Cspan class=\"token variable\"\u003E`\u003C\u002Fspan\u003Ers\u003Cspan class=\"token variable\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Enodemon\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E watching path\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Es\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E: *.*\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Enodemon\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E watching extensions: js,mjs,json\n\u003Cspan class=\"token punctuation\"\u003E[\u003C\u002Fspan\u003Enodemon\u003Cspan class=\"token punctuation\"\u003E]\u003C\u002Fspan\u003E starting \u003Cspan class=\"token variable\"\u003E\u003Cspan class=\"token variable\"\u003E`\u003C\u002Fspan\u003Enode index.js\u003Cspan class=\"token variable\"\u003E`\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\nRunning on http:\u002F\u002F0.0.0.0:3000 - Environnement \u003Cspan class=\"token builtin class-name\"\u003E:\u003C\u002Fspan\u003E undefined\nGET \u002F \u003Cspan class=\"token number\"\u003E200\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E26\u003C\u002Fspan\u003E - \u003Cspan class=\"token number\"\u003E4.811\u003C\u002Fspan\u003E ms\nGET \u002Ffake \u003Cspan class=\"token number\"\u003E404\u003C\u002Fspan\u003E \u003Cspan class=\"token number\"\u003E28\u003C\u002Fspan\u003E - \u003Cspan class=\"token number\"\u003E0.802\u003C\u002Fspan\u003E ms\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EPuis l‚Äôarr√™ter avec la combinaison des touches CTRL + C car nous allons utiliser Docker.\u003C\u002Fp\u003E\n\u003Ch2\u003EDockerisons\u003C\u002Fh2\u003E\n\u003Cp\u003ECette √©tape de configuration des containers n√©cessite du temps. Pour autant, elle n‚Äôest pas n√©gligeable car elle permettra par la suite, √† n‚Äôimporte quel d√©veloppeur souhaitant participer √† ce projet d‚Äôen gagner. Pour ce faire, nous allons cr√©er 2 containers distincts √† partir de 2 images distinctes. Le premier pour la BDD et le second, pour l‚ÄôAPI.\nAvant de poursuivre, v√©rifiez que Docker et Docker Compose sont install√©s sur votre machine.  \u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Edocker version &amp;&amp; docker-compose version\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ESi ce n‚Äôest pas le cas, rendez-vous sur le site officiel \u003Ca href=\"https:\u002F\u002Fdocs.docker.com\u002Finstall\u002F#releases\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdocs.docker.com\u002Finstall\u002F#releases\u003C\u002Fa\u003E et \u003Ca href=\"https:\u002F\u002Fdocs.docker.com\u002Fcompose\u002Finstall\u002F#install-compose\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdocs.docker.com\u002Fcompose\u002Finstall\u002F#install-compose\u003C\u002Fa\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E‚ÑπÔ∏è Ce tutoriel a √©t√© r√©dig√© avec la version 19.03.8 de Docker et 1.17.1 de Docker Compose.\u003C\u002Fp\u003E\n\u003Cp\u003EA la racine de votre application, cr√©ez un fichier nomm√© \u003Cstrong\u003Edocker-compose.yml\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Ch3\u003EService Mongo\u003C\u002Fh3\u003E\n\u003Cp\u003EPour la base de donn√©es, c‚Äôest relativement rapide car il existe d√©j√† une image officielle toute pr√™te pour MongoDB.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"yml\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"\u003E\u003Ccode class=\"language-yml\"\u003E\u003Cspan class=\"token key atrule\"\u003Eversion\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E'3'\u003C\u002Fspan\u003E\n\n\u003Cspan class=\"token key atrule\"\u003Eservices\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token key atrule\"\u003Emongo\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token key atrule\"\u003Eimage\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E mongo\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E4.2.5\u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003Ebionic\n    \u003Cspan class=\"token key atrule\"\u003Erestart\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E always\n    \u003Cspan class=\"token key atrule\"\u003Eenv_file\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E .\u002F.dev.env\n    \u003Cspan class=\"token key atrule\"\u003Evolumes\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E .\u002Fservices\u002Fmongo\u002Fdata\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\u002Fdata\u002Fdb\n    \u003Cspan class=\"token key atrule\"\u003Eports\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n      \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E 27017\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E27017\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ENous utiliserons la version 4 de Mongo. On veut que le container red√©marre √† chaque d√©marrage de Docker (donc √† chaque red√©marrage de votre machine). On veut que le fichier d‚Äôenvironnement \u003Cstrong\u003E.dev.env\u003C\u002Fstrong\u003E soit pris en compte. On utilise le port par d√©faut de Mongo 27017. On veut aussi stocker les donn√©es de la BDD dans le dossier \u003Cstrong\u003Eservices\u002Fmongo\u002Fdata\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003E‚ÑπÔ∏è Ce dossier sera cr√©√© automatiquement lors de la premi√®re construction du container.\u003C\u002Fp\u003E\n\u003Ch3\u003EService API\u003C\u002Fh3\u003E\n\u003Cp\u003EQuant √† l‚ÄôAPI il existe √©galement une image officielle pour Node.js (de pr√©f√©rence, la version Alpine pour avoir une image l√©g√®re). Dans le dossier \u003Cstrong\u003Eapi\u003C\u002Fstrong\u003E, cr√©ez un nouveau fichier \u003Cstrong\u003EDockerfile\u003C\u002Fstrong\u003E.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"dockerfile\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-dockerfile line-numbers\"\u003E\u003Ccode class=\"language-dockerfile\"\u003E\u003Cspan class=\"token keyword\"\u003EFROM\u003C\u002Fspan\u003E node\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E12.16.3\u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003Ealpine\n\u003Cspan class=\"token keyword\"\u003ECOPY\u003C\u002Fspan\u003E . \u002Fapp\n\u003Cspan class=\"token keyword\"\u003EWORKDIR\u003C\u002Fspan\u003E \u002Fapp\n\u003Cspan class=\"token keyword\"\u003ERUN\u003C\u002Fspan\u003E npm install\n\u003Cspan class=\"token keyword\"\u003EVOLUME\u003C\u002Fspan\u003E \u002Fapp\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EPuis dans le fichier \u003Cstrong\u003Edocker-compose.yml\u003C\u002Fstrong\u003E, √† la suite, en tant que service (en respectant bien l‚Äôindentation) et d√©pendant du service ‚Äúmongo‚Äù.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"yml\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-yml line-numbers\"\u003E\u003Ccode class=\"language-yml\"\u003E\u003Cspan class=\"token key atrule\"\u003Eapi\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token key atrule\"\u003Ebuild\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E .\u002Fservices\u002Fapi\n  \u003Cspan class=\"token key atrule\"\u003Erestart\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E always\n  \u003Cspan class=\"token key atrule\"\u003Evolumes\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E .\u002Fservices\u002Fapi\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\u002Fapp\n  \u003Cspan class=\"token key atrule\"\u003Eports\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E 3000\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\u003Cspan class=\"token number\"\u003E3000\u003C\u002Fspan\u003E\n  \u003Cspan class=\"token key atrule\"\u003Eenv_file\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E .\u002F.dev.env\n  \u003Cspan class=\"token key atrule\"\u003Edepends_on\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E-\u003C\u002Fspan\u003E mongo\n  \u003Cspan class=\"token key atrule\"\u003Ecommand\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E:\u003C\u002Fspan\u003E npm run dev\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ENos 2 containers √©tant d√©clar√©s dans le fichier d‚Äôinstructions, lancez la commande ci-dessous.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Edocker-compose up -d\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003ECette commande va t√©l√©charger les 2 images depuis le Docker Hub puis cr√©er nos 2 containers.\u003Cbr\u003E\nVous pouvez √©galement acc√©der au serveur Mongo depuis votre terminal.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Edocker-compose exec mongo bash\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EPuis l'authentification.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Emongo -u root -p password --authenticationDatabase admin\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EC'est bon, vous y √™tes m√™me si dans ce tutoriel, on n'aura pas vocation √† toucher √† cette partie.\u003Cbr\u003E\nEt le plus important √©tant d'afficher les logs.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Ccode class=\"language-text\"\u003Edocker-compose logs -f\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cp\u003E‚ÑπÔ∏è Si vous n‚Äôutilisez pas Docker, vous pouvez vous servir du package \u003Ca href=\"https:\u002F\u002Fwww.npmjs.com\u002Fpackage\u002Fdotenv\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003EDotenv\u003C\u002Fa\u003E pour lire le fichier d‚Äôenvironnement.\u003C\u002Fp\u003E\n\u003Ch2\u003EConclusion\u003C\u002Fh2\u003E\n\u003Cp\u003EOn est par√© au d√©veloppement pour la seconde partie de ce tutoriel.\u003C\u002Fp\u003E\n","download":"https:\u002F\u002Fgithub.com\u002FEtienneR\u002Fapi_rest_express_mongo_docker","tags":[{"title":"API","path":"\u002Ftag\u002FAPI\u002F"},{"title":"Mongo","path":"\u002Ftag\u002FMongo\u002F"},{"title":"Docker","path":"\u002Ftag\u002FDocker\u002F"}],"timeToRead":6,"parts":[{"title":"Une API REST avec Express et Mongo : Pr√©paratifs","href":""},{"title":"Une API REST avec Express et Mongo : D√©veloppement","href":"une-api-rest-avec-express-et-mongo-developpement"},{"title":"Une API REST avec Express et Mongo : Tests automatis√©s","href":"une-api-rest-avec-express-et-mongo-tests-automatises"}]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.8917d561.js" defer></script><script src="/assets/js/page--src-templates-post-vue.93f54eeb.js" defer></script>
  </body>
</html>
