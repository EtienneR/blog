{"hash":"b0515404f5f9844bba399d0440c3ce1a21b69ad3","data":{"post":{"title":"Authentification avec JWT sur Nuxt.js","date":"15 September 2019","content":"<p>Après avoir créé une API avec une authentification JWT, on peut s'attaquer à la partie front avec le framework Nuxt basé sur Vue. Pour cela, nous allons utiliser le framework CSS Buefy (basé sur Bulma) et le module Nuxt intitulé Auth Module. Pour la suite, veillez à avoir votre serveur d'API allumé.</p>\n<h2 id=\"génération-application-nuxt\"><a href=\"#g%C3%A9n%C3%A9ration-application-nuxt\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Génération application Nuxt</h2>\n<p>Dans un terminal, générez un nouveau projet Nuxt à l'aide de la commande suivante <code class=\"language-text\">npx create-nuxt-app front</code>.\nPoint important pour la suite, sélectionnez le framework \"Buefy\", le module \"axios\" et spécificiez que l'application est \"Universal\" A la fin de l'installation, suivez les instructions en vous placant dans le dossier <code class=\"language-text\">cd front</code>. Installez le module d'authentification <code class=\"language-text\">npm install @nuxtjs/auth</code> et par la suite, lancez le serveur de développement avec la commande <code class=\"language-text\">npm run dev</code>.</p>\n<p>Remarque : la version de Nuxt utilisée lors de la rédaction de ce tutoriel est la 2.9.1.</p>\n<h2 id=\"configuration-du-module-dauthentification\"><a href=\"#configuration-du-module-dauthentification\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Configuration du module d'authentification</h2>\n<p>Dans le dossier <strong>store</strong>, créez une nouveau fichier <strong>index.js</strong>. Puis ouvrez le fichier <strong>nuxt.config.js</strong> et ajoutez la ligne <code class=\"language-text\">@nuxtjs/auth</code>, dans <code class=\"language-text\">modules</code> puis le code ci-dessous.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">axios<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  baseURL<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:1234/'</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\nauth<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n  localStorage<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n  cookie<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    prefix<span class=\"token punctuation\">:</span> <span class=\"token string\">'auth.'</span><span class=\"token punctuation\">,</span>\n    options<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n      maxAge<span class=\"token punctuation\">:</span> <span class=\"token number\">10800</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  strategies<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    local<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      endpoints<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n        login<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> url<span class=\"token punctuation\">:</span> <span class=\"token string\">'login'</span><span class=\"token punctuation\">,</span> method<span class=\"token punctuation\">:</span> <span class=\"token string\">'post'</span><span class=\"token punctuation\">,</span> propertyName<span class=\"token punctuation\">:</span> <span class=\"token string\">'access_token'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        user<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> url<span class=\"token punctuation\">:</span> <span class=\"token string\">'me'</span><span class=\"token punctuation\">,</span> method<span class=\"token punctuation\">:</span> <span class=\"token string\">'get'</span><span class=\"token punctuation\">,</span> propertyName<span class=\"token punctuation\">:</span> <span class=\"token string\">'content'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        logout<span class=\"token punctuation\">:</span> <span class=\"token boolean\">false</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre>\n<p>Dans Axios, on spécifie l'URL de notre API. Puis dans le module <code class=\"language-text\">auth</code>, on déclare vouloir utiliser des cookie et non le localStorage. Ensuite, dans <code class=\"language-text\">strategies</code> pour la connexion locale (<code class=\"language-text\">local</code>), on spécifie 2 endpoints, le premier pour la connexion et le second pour récupérer les informations de l'utilisateur.</p>\n<table>\n<thead>\n<tr>\n<th>Page Nuxt (dossier pages)</th>\n<th>URL API</th>\n<th>Méthode</th>\n<th>Données</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>login.vue</td>\n<td>login</td>\n<td>POST</td>\n<td>token</td>\n</tr>\n<tr>\n<td>user.vue</td>\n<td>me</td>\n<td>GET</td>\n<td>data</td>\n</tr>\n</tbody>\n</table>\n<p>La colonne \"Données\" correspond au nom du champ retourné par l'API d'authentification.</p>\n<p>Dès l'enregistrement des modifications, Nuxt va \"rebuilder\" tout seul l'application pour prendre en compte les changements de configuration.</p>\n<h2 id=\"page-protégée-coté-front\"><a href=\"#page-prot%C3%A9g%C3%A9e-cot%C3%A9-front\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Page protégée coté front</h2>\n<p>Dans le fichier de la page \"inspire\" (dans le dossier <strong>pages/inspire.vue</strong>), spécifiez le middleware <strong>auth</strong> dans la partie JavaScript.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  middleware<span class=\"token punctuation\">:</span> <span class=\"token string\">'auth'</span>\n<span class=\"token punctuation\">}</span>\n</span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>script</span><span class=\"token punctuation\">></span></span></code></pre>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 248' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-97'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-97)' width='1351' height='248' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAMCAYAAADS87vJAAAACXBIWXMAAAsSAAALEgHS3X78AAACOElEQVRIx8WVTW/TQBCG/fugPwD4ARxpuSABFzhw4oK4AkJ8qheERAtUIJVCGhSLpkBpVEBCJG6T2ImdeP39/TK7jYUbIoRUO0R6tOP1Zmb3nZm1dPPCD1w/9x3Xzn7DxVMtXD5DnP5/XCowj3jS7attLN84wK0rbSye%2bIzFkzszWZoT5xcOWVqYTzxp5V4PLx/18WpZxdrj2byg96sPenheNQ97eHp3H0/uKFi53xXPVceU8I%2b/DAmRVgaIIAnhhD68KBBjWnFMjqTrBoYDHb4fIqV9pEl2lDRDGCZw3AhulXgRhoYLyw4FI9ODyUgML640rpTSqZMk%2bZ3pLCPyMRNzcZzC8yP4QSzGKuC%2bTcuHPnYxZp4Y3b/%2bp5y9SNvbTbQ7CgaaCsasggizBTgOuY8opqqKUmEHVF2c3LYpK5YTwqNnvobD56fXl7EfjmRbFmzbIWxyHFYmQLGCNGq5gT6G7fhU7p4gt03mwBgxMIsqwbQntkftYYo1fI6/K/o8lgCy3EBHUTAyDBhElQLwrAZBhFZrD6/Xa9htfcWbjRqera5hZ3cPW81PePuujlpdRpPs2mYD8ocmmh%2b/oCFvof5exvrGJn52uqKKShHAcRy64BxxeMbYXFrgsKxjihuIrPKsF9flZT5d%2bsX7orQW%2bONzNzl00S67BYoH4UKomoGDrgZtOEJf09FXdfTUoZhX9vtg1BrTPkprgWK28wNX1gJ%2bPEOEaNL77pE7gfd9fg%2b4XjhTvDIE%2bAUKj%2bAJwoGlAAAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1351\" alt=\"Erreur 404 : Pas de page login\" data-srcset=\"/assets/static/nuxt_auth_no_login_page.82a2fbd.9dbea19.png 480w, /assets/static/nuxt_auth_no_login_page.cbab2cf.9dbea19.png 1024w\" data-sizes=\"(max-width: 1351px) 100vw, 1351px\" data-src=\"/assets/static/nuxt_auth_no_login_page.cbab2cf.9dbea19.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/nuxt_auth_no_login_page.cbab2cf.9dbea19.png\" width=\"1351\" alt=\"Erreur 404 : Pas de page login\"></noscript></p>\n<p>Cette page protégée affiche une erreur 404...</p>\n<h2 id=\"page-dauthentification\"><a href=\"#page-dauthentification\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Page d'authentification</h2>\n<p>En effet, la page \"login\" n'existant pas, la présence de cette erreur 404 est justifiée. Pour la faire disparaitre, dans le dossier <strong>pages</strong>, créez le fichier <strong>login.vue</strong> avec un formulaire comportant un champ pour renseigner le nom d'utilisateur et un second pour le mot de passe.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>section<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>columns<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>column is-4 is-offset-4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>title has-text-centered<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Connexion<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-notification</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>error<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>is-warning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            {{ error }}\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-notification</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">@submit.prevent</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>login<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-field</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">label-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-input</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-field</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-field</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">label-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-input</span>\n                <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">password-reveal</span>\n              <span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-input</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-field</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>control<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button is-dark is-fullwidth<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                Se connecter\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>has-text-centered<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 20px</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n              Avez-vous un compte ?\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nuxt-link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/register<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>S'inscrire<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nuxt-link</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Désormais, la page <a href=\"http://localhost:3000/inspire\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:3000/inspire</a> redirige bien vers <a href=\"http://localhost:3000/login\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://localhost:3000/login</a>\n. Puis dans la partie JavaScript de cette page.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      username<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      error<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$auth<span class=\"token punctuation\">.</span><span class=\"token function\">loginWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n          data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n            username<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\n            password<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password\n          <span class=\"token punctuation\">}</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/inspire'</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>message\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>On récupère la valeur des champs <code class=\"language-text\">username</code> et <code class=\"language-text\">password</code> via la fonction <code class=\"language-text\">login</code> définit dans <code class=\"language-text\">methods</code> lors de l'envoi du formulaire. S'il y a une erreur alors, c'est la valeur \"error\" qui affichera un message.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 548' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-99'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-99)' width='1351' height='548' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAaCAYAAAAHfFpPAAAACXBIWXMAAAsSAAALEgHS3X78AAADyklEQVRYw%2bVYW28TRxT2X0n%2bQIiUx6ovVIldEjVSXwpPPPGCBDwhlTaVEzdqCAgk7uIPICGgD9SEkFLggdCipiJBYBMuudjry3p9W9u7vszOx5nxeu1GhQaytmVlpM9nZ3bmzMy355w5Y8/Jw6s4d/wtTh95jelDYXz/3Qv8cICwf3fA4z8YwlX/Gq6djeDyj%2b9wxLeMY/tWcHSXwLNwPYm71xIQ8o%2bbKu7fSHYFv2%2bzzW14sMuLxzBMaFoaKVVDuVyBZQEW450FzcmtDy%2bSc4C1aW6PRbPXajUI2ZyQy0nr0m0IvRaB0aZrcr6MRuZ%2bbw7BO0HcW5jH3bnbuPXrTczP3yHMIZ3W6uui/nKcGA931idd4J%2blv7G2voFYLIq8rreQwF03uYZObkOUKgMSahGbShZxIaNprEfSUBK6RLkKZ8xWPTt2AfGj06ZLhkEuYKLGWFsIaNXHzVc06QJQfAQUHgAlkuXHxMRiUwpUBKheeASefwCuPwTLLoAbYdfWKAn488ki1jc2EI/HoKZSbSSA1b%2biegHG8hcoPd9H8EF/NoLSiheFZZLPvRLFlREH7NUo%2bOoo8GYM6l97YUbO2zqZOwQw%2burVahXFYhFmudwBAi4hv/Qlkk%2b/RmbJh9jiMOJPRhB9PAz1qVciRnXFrrPX4%2bACb74FC%2b2FlTjnHgH/paBtvm8HLxQeEglngPQVQLtYR%2bpCUzae7TpPnrdxETxxmtzhvq3TcscCtkbGdseAao3DrJC7V8RzMyB%2bDI6eBlqC6Y4J6EhpIUCJRrCy/Ayh0EusroZh8XoiwG35/%2bCuWaqnc/tvEiDyjlwuC72gkwVUZQz6VHCXSOgSAVVs0KmjqqrTLhKx7aLnCcjn88hms1Lmcjn7nbWtzM1i1M9yL051JQYkkwmEw2GEwiGZf%2bAT0tq2ZIKdtgCRc8QTcVQqFdkmpGj7GEQf4TprIbIezew9C9jqs5lM%2brP06JSoVsz6Adi4sPUMAY0bZzAYxMTEBKanpzE5OYmpqSkpZ2ZmJGZnZwmn6PkX571AIPAzJn46gd%2bCt6Ueoa%2bnCBDHnyiBQAB9fX0YGhrC4OCgxMDAHox4vfD5fBgbG8U34%2bMYHv6K2gecPqJ/f38//H6/c5z25CkgToDNzU1Eo1G6gsegKIqUoi4QiUQQJQip0BVdUeoQ78Q4Mb73ToEPRG%2bRC2QyGRkTxMbEsahpGhIUJHW9hHyKQ8%2bQ76d5W%2b4rXbGA1sSnTLfPBkzTdKRhGPXoX2YOGLP%2b5fc9aQE7/YJu31Q93dz85/yH5zYJ7wEpuISJsUqKDwAAAABJRU5ErkJggg==' /%3e%3c/svg%3e\" width=\"1351\" alt=\"Erreur 404 : Pas de page login\" data-srcset=\"/assets/static/nuxt_auth_login_error.82a2fbd.8f3d29b.png 480w, /assets/static/nuxt_auth_login_error.cbab2cf.8f3d29b.png 1024w\" data-sizes=\"(max-width: 1351px) 100vw, 1351px\" data-src=\"/assets/static/nuxt_auth_login_error.cbab2cf.8f3d29b.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/nuxt_auth_login_error.cbab2cf.8f3d29b.png\" width=\"1351\" alt=\"Erreur 404 : Pas de page login\"></noscript></p>\n<p>Remarque : si vous avez l'erreur <code class=\"language-text\">_context.t0.response is undefined</code>, c'est que le serveur de votre API n'est pas démarré.</p>\n<h2 id=\"vuex--getters\"><a href=\"#vuex--getters\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>VueX : Getters</h2>\n<p>Dans le dossier <strong>store</strong>, créez un nouveau fichier <strong>index.js</strong> avec les 2 getters ci-dessous.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> getters <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">isAuthenticated</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>loggedIn\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\n  <span class=\"token function\">loggedInUser</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">state</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> state<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>user\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 202 143' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-100'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-100)' width='202' height='143' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAtCAYAAAAeA21aAAAACXBIWXMAAAsSAAALEgHS3X78AAAPNklEQVRo3tWa93JbSXbG9UJ%2bBr%2bC38FV9s7%2b41qvd8sulcdhdidrRuQojDQSlSiRSsxJTGIWCBAZIAIBEDnnHO7Fz40LgAQYJGo0cq1QBeKyb3ff7tOnv%2b87p%2b8lzvg0m00%2b5POh7f8/P5dag63V68iyrPx2B59NpzE6A5RrDcKRBJlcgfk1DVt6O5ObZiRRz%2bOPUapWcfsixDN5XOI3V64fGeFTMMOl1p/5lS1%2b96cvMFrtSqFUyTO7vseKysj98XWGxlZ5tqTm%2bbKGNwY7s1tGXu9ouflsRZSpePHahNZk4874Js5IVulDlj8hA6QzOUbG5xQvUAxQzrP4xozO6uD26BIjSxrsYnVX3hgxHfhZU5uZXd1lctuKymhl3RIgGY/zeHKdNbO/YwD50zDAyf3aWrnWx2K28v29GUz%2bNIFAiFC6SDKVJpTI4o8kyRdK7LsCJLIFUvkypWIBo91Hulj79LZAa7CKyzabRxiQEpN1h5K/ahKfFAgerVbPoPsmoBhHRu7UkTvfZqe827b3/0/OA3on3juBtlecfU/5bd2XT5T1GOQiZedd9/0vn1NPPtlG%2be/Im8969sn%2bL72vSze7W0XuKZPkU2VHmCI1%2b9r0Gu3cvptnPKPZ048k97Rpe2fnP3qdt2WIrjGOvfbYi99pgF5LVeJ50qFi3/1yJEfclesvE/UqJYm8O0nysHhu37VciVy0rFznvRny6dqZ9aRylUzwdD9SrkhAGz8x1rYRvOEqpXrzQgv7bgN0VuHguRmvKUNFAOPuLSNVMV7fjAXVPTsZd5qYOU7UFEP70w6bP%2b8T3vSwcnkTvy5JdM%2bP5q6JgCqE4Y4e716cg5cGZi%2brqFcbmIf0JCJVKsEU2rtmMqESnjk79qUgoXUnU/%2byRi5RwTW1j/6pk4Q1zpuvNtA985PLR3B5Q0djruaq/OPnbqaNFSL%2bEteex1lS5dA7Suj2i%2byaCww8jqByVS%2b2BbrultH5cGni1GIZdq7uETbEUP%2b4w9o3agwP9/Gve9mf8eDbOiR4UCStC7A/5cb8QMeiMITxuQPdzwacc272J1yEtEFsK%2b2B%2b2ZsJMIl7A8MxEM16qkcJnG98oWKiDWm1KsK6l340zq2CTtbP%2brwb/uxTngplFMEQjGln4ayWDJ3JsQ4xZVmM8kLdYmor8ToUobZ5QS/%2b9bPj6Mx5jXFi26B9rXjsZ43Q/uUkkVM9wzoH5hxrQUIqwKYRm3KgE0zPnKeOIYRB%2bG9MGFtFO%2b6D8eME/u8l6DwgLA2wuFmkFwgw94vJoqZCvqf3mBa8JM0htAP2wjthTANWxSvyceL6IeMJDxZrKMWPNthItow2hsaHCtxkrFDLI7DtgE6izW5kGDBWObAUUDTWmkh54dexLg5kWD%2bTZZ700k8icbFDNAFmlq%2bRq1YpyFctlZunKrbKu8aqyHigRb4KaDUuV/JVI9E1tE%2bFm3qoq96qa703frUhZBS1rHeQGq0JyTXWtfN1kCo5NpYURfPaNWTGg0xcekIRLtgWChLfXNo1GXqUvs6X2hQbZwAwZO0cUQlZ4maLiILi8tikKdQ/kg/nGwryiT5DLboodVe6jrJGOcsVK/%2baD1XUiT9sTbpSvyWAeUTzHLpXQpOKZEaBHdDlAvSewuNYrQoVr9CIVJE6mku1SXFGFLjgnKph5HkuuivWBFsU6BUaRyNNJvNIjcv0g%2bndUC3QBKjTKYyyrdQLB2Z3Tqsw2cttJyPAwFkpaJExhblYDVAJVvhcNFNzF2gHM3iU0Vo1CS8s/uo7uwTWD5g4fI2hVQZ32sfSVcS27RL4EEIxys/CUuMhFcYqFjGuxGgKtw3bYtxuCHAr1QjnU4h03XGBitz4zwfm2Z1eZHRpy%2bJ5yokwy6W11XKWF02I55gHKlWYFelJpGI8vj%2bL2zqnafovc8AXff4w39%2bw9/9/T/gDRzTi3fFSSpWw7fsZH/Wg/qnXfQC7MzDBrYGddgnnahvatj8VsXOwB5vxNc%2bKZB/xEklUeBgXQCfI4rmhgHzEwPqxw4S9hj6e2Z2BzUETUkMP6tZ/u9t3K%2bD6ATI%2bQxiRSsljAYD9S6WpA6ZeLVBPOLl5uAtNjY3mZ1fJhL2Mbe8LiZv4Pq1a0xMzzMzMYXB5hE2KzL2YhRXNH%2b%2bAbp7qfWxuw4ZFeFxGzzafhtYcmBbDOBfc2N8YkM3ZMA66cL0UExmyIJz2onmtg71bQNuMVnXvIv95za0w3ZCG25Wv9EIZgiJFQ5yMGVDc8eM9hcdB5sRfAt2VDcFi4yYMTw9IB/Ksy%2bYRXFuuYLVYuUIdqUi0xMvmJqZY2JsgqmpKWZerSE1a6xvbuM52OfxyDPch362Vl6x8UavNNtanUNr97/dA3rDYeW6BwSb1Trx/ZTYuw3Cmggtxgm/drLyPyqyYUE3329hmPQLxK4R1sUU1E2YY4qoyR0KrlZHKSYrilBpIXlF0GnYkBAYIClboNBSgo06EV2Ucr5OJV1WMKMp1UQ4HkBSxtheoHxKbL1DUdao4di3khEsEnIZeDGzpNwP%2b1z4QkIlNhvYrFbyAicqhTQuj%2b8IoM80wJEROuj5rvC2EMiRT1TFcxqkXBnqNfm9QbIXtHqvu2xwzGwdHd83ruP6Yb%2bfVK58MTB9WzR4buTXG4zI8hkUx6mgpkt5ra8snUGJ3T7k/oDogrRwJjkq9N0Z38mQ/ShL9b7R4HkWLKcrigtLwt1lgRW1Qk2hu76V7NYXD7/1NIo50mBrI8XAeIqqaDe9mGTFXBYAW%2bH2RBJ/vMbEfIIBoeF3hG6/NhzhxVaOxfU03z6O4fSXGXwqWKMks7KeYlhIXJOzxP2JGBp39b3zkZfed/LdlfQLUFz5fIP9OS/Ol1Yskx6cYwLcbgm63EkSD3sw291tIO0ouvm1BIuWKpvrSb4cjvNaleGzr3zMiGDlh3sh/uNWGGNQqEhBfd8Nt/X9ktDv04aWa0t89zCqTOz2yxj2cJ3bj0J8JcoGhEHuTcb5y8OYghXIzQtnpX61AbSDKjQPbCQ9OYyD2%2bzcteNdcOEU6G96IpC8kCEUiXe0RdsAC68T3F8rKNevVpP862CQBwtpHoxH%2beONMGNLSR6u5lDvZRjTlpTA5rtH7Ulr1Skeb7XbDo5E2DAVufM8xtWRGOvmEuPTUS7fj/dtwd/eAD2YUI5kRJAjxI81QdSaJHOYRi%2b4e/PKngBGiZTgaZvLd8wmYjJPp%2bI8Ws2i0eW4M5MiW5ZZWksxry0Sj1e4K4KVUEZCbymQEqRQztTYspaUPvaMeaIlIXMF4g88irBsLLG9m2X0dZZossb4cgp7tH6KyX5zD3gbK2RdYl9XmmcHVO%2bZIOwFw4Z0DHjvmlvzHWP8YAP0Jz2PAxa5LvcNvoW4XdfvT5Cekw77jTKoH9cAfaguYgZnml52awoRlAkW%2bhC42eVt8buxlyNWlAkKJF/WFhDhAl5vCZO3pSVkVGJfR9N1NoVrL%2b6JQKcqozYVSIutEotU0B5USAnBtKLOkxL9tNq%2bsZWpVCTWNTmiBblny32MLcBxeFo6jLM3ZG1ndF45sM76iO95mfz9EpmYRDYRxO1rxxJSp83NJyFeWauMjoT4w60YgWCZz/7Xw9RekYnZGJ/9EFQSFW5ngS/vRRiZjfP7K0H2vWUuX/FybTZDsdTg%2bv0Qt%2bdS3BZg%2bBdR7%2bpolBvPYlyfTH18EFSYQPmtY3m6T7lYxTZiYvnzbcICEM3jB208iIYJdFigS4N6c5ZZfVutrQgt8MeBADfEoJ/Px/nn74OMr6YY3coTDpaY28tz70WMp2tZvrjp55vRBI%2bm45jDDfbUaX4QOuHBVILB0Rhzu3nG5%2bL828%2bR9tg%2bngGOPaBwEGX9rzv41CEsT6yob%2bnFyovIbUhPKtQgGXJjdng6HtBOUFy/H%2bTblylMAuUHBH1tWYo8mRIcLqiwtT2uPIywK9z8lWAGV1rG48zzvaDBBeHy44sJbown2DQUuDcWY3QlzZMZIZiexbF6KzwejzGtLR4LoebH2gLdFFOlrgQ2Ul2UCTVYr0qdZIW4FntSFhhRbzT6ZHRJxPllsa%2bLrbR5ue0Vrfihi58n01hKQqVbJgBVSWOJe8lc46isVGun3jLdZM0R4H6sLXAGwvbm4ppvZ9D%2bnGBv5HnGCZN8RoTaPFG/t2%2b5Jx330Tyg94HlZElQXefgRFzXKvIpuiyL1c6V5Asfm/Uec73tWOttx13Nj8oC3ZOiUBrLywPFJBlLiI0vVWSSdfL5NC3M69azGDP8%2bU70VBT2N3k4%2bl46oFjC/MxBLpjC%2bMiC7q6RTLSM1aynvW07bCHCk5bslc6IxT9BAxyvYD2WYfvKLkF9BNu4E811Helo6zDCSkU63iexYJF/%2btqPP998b5HyN22AUjiHbytIPlml4M8QMacEGEpC5fmoHadwiceqvBacHslJH/zyxDsTNh8fAy76BkizL8vcl605D8DOeTfg5EsYb3uX4GSZ3HN0ft6YfwUL9Lw0cUJxHdHhSZp8ywCaZwz8bQM%2berbUn39sNurHccd7LNiv3gItwaOc7ohJS0IUFROVzhlgpT1hIY4K0aJy5ldKtOmylq1QFVq%2bda8oyupVWckTdM/7TgZQ2ZiPsbExAvG8UElZ6uV2vYpVTXxmCalapZ7Jiv7KZLe3lEy0XMzSyBaRakVmJ19icgT6Uv4fbICuWx8uuJWTXvfSIepBNW51gpjqkOXLa9iXQxw8M2EYc%2bOasKEa2MO1Hia0fcjWd2pMwyalnmbIjOmhkeX/2iThKuOwaolkjl%2bGyMX9St4/lCpQePUM3/XbpFeXCN0cxD9wFf/Vb3D/9WsKFivRRw%2bo5fNEf/mJ8P1h8h4/S8uzmJ3B39gAHeFzMG7HPmHH%2bNJFcPMQ7V0Tmhsa1HetJBxCIzww0XppNLTiwivA0iBiBP2InZ2vN3n95S6mEQu7A7ss/PsGtjkP2UBFhLx%2bIZpqp9026RWTGsJ/5Qs8P9wkr9MQ%2bP5LIk8eEbhxjbzZSXLsCQW3i%2bTEFJmVWdJa18fYAsf7vOBLiWjQSkigf2TXj3M5IJRhAfu4g0y4TNISpyr0fs6dIu3JEDPF8G0GcM658O2ECOvChI0Jovow9lmP2E7gEBoi3sntt/FAVrSEXMmRWV0kubRMSUwyMfac1Oo6BaOOnE6r/EYf3CWzq6XkPKB8YKMSSbeP2WX5rUb4Py4EDLs1g55SAAAAAElFTkSuQmCC' /%3e%3c/svg%3e\" width=\"202\" alt=\"Exemple utilisateur connecté\" data-srcset=\"/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c.png 202w\" data-sizes=\"(max-width: 202px) 100vw, 202px\" data-src=\"/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/nuxt_auth_vuex_getters.31cbfb4.004cd2c.png\" width=\"202\" alt=\"Exemple utilisateur connecté\"></noscript></p>\n<p>La première fonction renvoit un booléen. Lorsque l'utilisateur n'est pas connecté, la valeur est égale à <code class=\"language-text\">false</code> et <code class=\"language-text\">true</code> si connecté. Quant à la seconde, elle retourne les données fournies par le endpoint \"/me\" de l'API JWT (ou <code class=\"language-text\">null</code> si non connecté).</p>\n<h2 id=\"modification-de-la-navbar\"><a href=\"#modification-de-la-navbar\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Modification de la navbar</h2>\n<p>Dans le fichier layout <strong>default.vue</strong>, ajoutez le code ci-dessous avant la fermeture de la nav.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-menu<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>isAuthenticated<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-end<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-item<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      {{ loggedInUser.username }}\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>span</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-item<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">@click</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>logout<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Déconnexion<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">v-else</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-end<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nuxt-link</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-item<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>login<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Connexion<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nuxt-link</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nuxt-link</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>navbar-item<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>register<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Inscription<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nuxt-link</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Ainsi, à l'aide d'une condition, on peut afficher le nom de l'utilisateur et ajouter le bouton de déconnexion. Mais avant de tester, il faut appeler les 2 getters de Vuex dans la partie JavaScript de notre layout (todo: le nom du fichier) ainsi que la fonction de déconnexion.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> mapGetters <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'vuex'</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  computed<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span><span class=\"token function\">mapGetters</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'isAuthenticated'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'loggedInUser'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$auth<span class=\"token punctuation\">.</span><span class=\"token function\">logout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n          message<span class=\"token punctuation\">:</span> <span class=\"token string\">'Vous êtes desormais déconnecté(e)'</span><span class=\"token punctuation\">,</span>\n          type<span class=\"token punctuation\">:</span> <span class=\"token string\">'is-info'</span>\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<h2 id=\"création-dun-utilisateur\"><a href=\"#cr%C3%A9ation-dun-utilisateur\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Création d'un utilisateur</h2>\n<p>De retour dans le dossier <strong>pages</strong>, créez un nouveau fichier <strong>register.vue</strong> afin de créer un formulaire d'inscription.</p>\n<pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>template</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>section</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>section<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>columns<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>column is-4 is-offset-4<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>h2</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>title has-text-centered<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Inscription<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>h2</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-notification</span> <span class=\"token attr-name\">v-if</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>error<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>is-warning<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            {{ error }}\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-notification</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>form</span> <span class=\"token attr-name\">method</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>post<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">@submit.prevent</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>register<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-field</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">label-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-input</span> <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>username<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-input</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-field</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-field</span> <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Password<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">label-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-input</span>\n                <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">password-reveal</span>\n              <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-input</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-field</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-field</span>\n              <span class=\"token attr-name\">label</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>Confirmation du password<span class=\"token punctuation\">\"</span></span>\n              <span class=\"token attr-name\">label-for</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password_confirm<span class=\"token punctuation\">\"</span></span>\n            <span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>b-input</span>\n                <span class=\"token attr-name\">id</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password_confirm<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">v-model</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password_confirm<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>password<span class=\"token punctuation\">\"</span></span>\n                <span class=\"token attr-name\">password-reveal</span>\n              <span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-input</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>b-field</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>control<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>button</span> <span class=\"token attr-name\">type</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>submit<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>button is-dark is-fullwidth<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n                Valider mon inscription\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>button</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>form</span><span class=\"token punctuation\">></span></span>\n\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>has-text-centered<span class=\"token punctuation\">\"</span></span><span class=\"token style-attr language-css\"><span class=\"token attr-name\"> <span class=\"token attr-name\">style</span></span><span class=\"token punctuation\">=\"</span><span class=\"token attr-value\"><span class=\"token property\">margin-top</span><span class=\"token punctuation\">:</span> 20px</span><span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>p</span><span class=\"token punctuation\">></span></span>\n              Avez-vous déjà un compte ?\n              <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>nuxt-link</span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>/login<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Connexion<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>nuxt-link</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>p</span><span class=\"token punctuation\">></span></span>\n          <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>section</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>template</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Et pour la partie JavaScript.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">data</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n      username<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      email<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      password<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      password_confirm<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span><span class=\"token punctuation\">,</span>\n      error<span class=\"token punctuation\">:</span> <span class=\"token string\">''</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  methods<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">async</span> <span class=\"token function\">register</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password <span class=\"token operator\">===</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password_confirm<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">try</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token comment\">// Enregistrement de l'utilisateur</span>\n          <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$axios<span class=\"token punctuation\">.</span><span class=\"token function\">post</span><span class=\"token punctuation\">(</span><span class=\"token string\">'register'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            username<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\n            password<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n          <span class=\"token comment\">// Connexion immédiate</span>\n          <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$auth<span class=\"token punctuation\">.</span><span class=\"token function\">loginWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">'local'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n            data<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n              username<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span>\n              password<span class=\"token punctuation\">:</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>password\n            <span class=\"token punctuation\">}</span>\n          <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>$router<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span><span class=\"token string\">'/inspire'</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">}</span> <span class=\"token keyword\">catch</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n          <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>response<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>message\n        <span class=\"token punctuation\">}</span>\n      <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>error <span class=\"token operator\">=</span> <span class=\"token string\">'Le mot de passe ne correspond pas'</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre>\n<p>On récupère la valeur des champs <code class=\"language-text\">username</code>, <code class=\"language-text\">email</code>, <code class=\"language-text\">password</code> et <code class=\"language-text\">password_confirm</code> via la fonction <code class=\"language-text\">register</code> définit dans <code class=\"language-text\">methods</code> lors de l'envoi du formulaire. S'il y a un erreur alors, c'est la valeur \"error\" qui affichera un message.</p>\n<p><img class=\"g-image g-image--lazy g-image--loading\" src=\"data:image/svg+xml,%3csvg fill='none' viewBox='0 0 1351 628' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-102'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-102)' width='1351' height='628' xlink:href='data:image/png%3bbase64%2ciVBORw0KGgoAAAANSUhEUgAAAEAAAAAeCAYAAACc7RhZAAAACXBIWXMAAAsSAAALEgHS3X78AAAEvklEQVRYw%2bVY208cVRjfv4ZXHjCCT8aXAuVilGK8xGhM1RiTmmC0oMi9pmKbGJ%2ba%2bGpiSxMeTGgAG32otggW0gLLXriz7M7MXtgLuzu7c/n5fWd3YKCY0jJLHT3JL%2bfMt7Nnzved3/l934znm48D%2bP7zFVy5EMSlD3zoen0RX75JeMPd%2bILQ/ZYXfe8soe/dErrJr563vei1bNR7ePBD3xp%2b%2bm4L175aw4XGB/ik6aHrwX5cPLeAwfM%2bXHrfJzb305fnaXO9GCLb5Y/8GHyPAjBxXcKtHyPg/vZNGb%2bM/BsgiX6y3D8tJm9Iwi8LkzfIdv2gzYP/efPkcipisTiiSgxqvgDDAAzdPFXohCObzazrRkWe7THIY13Xwf3ec02TYPVOw5pXF2Av1VwGk5Pj%2bO3X25iYuIWJ8TGM3BzB2NjPwh4M%2bsW6DEPb%2b59TaxRHYPb%2bX1hb30AkEkYylbYFwXScctacpm2DDRpsR5LYDMWwsRWntcjw%2bjeFbX0rhp1U8TAhSmMH1icCkMmkkc1mkc/loGlaRQJgn88syvTQO0B2Cti9V%2bqL9wFttgQe63M0LtvUGXGfSTDSf8DYJZtplIJ4wjWKAEzdu4u1jQ3IsoRoNFrBAOilnUuNQ/O%2bCNXbgvzCWeQEGpGdb6RrwmJpzLDs6uJZYLkFqblG7Mx/SJMU9o7AiQNQLBZRKKhIp1PIEgsqH4AJ5B6%2bBGWmCdJUPaQ/GxC%2bW4/N389Anm5AdKaR7A3YvHMGEbLzb3xtBF%2bB7m%2bCvnqeaeQMA46aoGJnv0xbZB8AkQFAuUr4FpCHS1CG98dHwIwQwl/DVK6VBdQhBhxWxsowYH%2bxBqmeRutnUALaE8QnBU9qOiGCp9JsAY3HY5ibm4V3yYuFhXmoqmrbzWO778gGeU7P//0AcN2RSqWQI70pFAoi87Dt%2bNAOMNU1AbAHIhTaItHNlI%2bE8USwF26uCoC12Hw%2bT86nsZvdJSakhUP822OdN/fHrmMAn1trsTs7CTr7C1jy%2bRAIBI7tjP33fb2A%2b44A7yALYTKZFExgFrAOHIb93Gsa1xD0PzmPaDhXDqhLNYBbJBJBaDsESZKwQ4E4qh2gv24Ip5VQHqHVrPsCYE%2bDrP6KIhMUKFR6Mxvi8QQhLkpxRiKRwOEahesHp4u1ZyKCGaJ9MOCnt751BJeXsbK6gnUeBwPw%2bZbgJ10IbW/vseA/EwBLtPhM8%2b7zzvNu85voUffzO4qFQqFIWUBDeD2DzeW0%2bzWAU2GSiiEWQfvHmMe1IunfbhKOleunGgDL0enpaXR0dKCnpwfd3d0CQ0NDGBwcRH9/P/oH%2bkU/QD3bent70dnZia6uLlzs/AxXrg4f%2bG7hmgAw9bmNjo6iqqoKdXV1qKmpQW3dC2h/rR1t59rQ3NyM1tZWQgva2l5Fe3s76uvr8Rzd93xtLaqrq%2bmeFlFCu7YS5CwQDochy4rQAlmWxTWnRsajY7qXsoasSJQ2I0I3XFgJPqresRilvFgp7XF1GAqFyBajwigpgiLJEmUMKptjVD3KBhISvQcUnTv/z4wBlh6wuvOrsAVmBvdMb%2b7zah5aUUOxoAsUVF18HjdNw70MOPxecFIWuYYB/8SEp4GTQfgbDM93Zz8kNRQAAAAASUVORK5CYII=' /%3e%3c/svg%3e\" width=\"1351\" alt=\"Erreur de saisie du mot de passe\" data-srcset=\"/assets/static/nuxt_auth_register_error.82a2fbd.a2874b9.png 480w, /assets/static/nuxt_auth_register_error.cbab2cf.a2874b9.png 1024w\" data-sizes=\"(max-width: 1351px) 100vw, 1351px\" data-src=\"/assets/static/nuxt_auth_register_error.cbab2cf.a2874b9.png\"><noscript><img class=\"g-image g-image--lazy g-image--loaded\" src=\"/assets/static/nuxt_auth_register_error.cbab2cf.a2874b9.png\" width=\"1351\" alt=\"Erreur de saisie du mot de passe\"></noscript></p>\n<h2 id=\"observation-des-cookies\"><a href=\"#observation-des-cookies\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Observation des cookies</h2>\n<p>Lors de la connexion sur la page, un cookie est créé et se nomme \"auth.strategy\" avec la valeur \"local\". Une fois la connexion établie, 2 autres cookies font leurs apparitions :</p>\n<ul>\n<li>\"auth_token.local\" avec pour valeur le token JWT ;</li>\n<li>\"auth.refresh_token_local\" avec pour valeur \"false\" car aucune route n'a été établie.</li>\n</ul>\n<p>Puis lors de la déconnexion, le cookie \"auth_token.local\" aura pour valeur \"false\".</p>\n<p>Le cookie n'est pas spécifié comme étant sécurisé. Rien d'anormal, par défaut, on est en HTTP et non en HTTPS. En revanche si vous avez du HTTPS, il est fort recommandé d'ajouter aux paramètres du cookie la ligne ci-dessous.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript\">secure<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span></code></pre>\n<h2 id=\"conclusion\"><a href=\"#conclusion\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Conclusion</h2>\n<p>N'oubliez pas en production de spécifier que votre application utilise des cookies...</p>\n<ul>\n<li><a href=\"https://auth.nuxtjs.org\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://auth.nuxtjs.org</a> ;</li>\n<li><a href=\"https://scotch.io/tutorials/implementing-authentication-in-nuxtjs-app\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://scotch.io/tutorials/implementing-authentication-in-nuxtjs-app</a> ;</li>\n<li><a href=\"https://en.wikipedia.org/wiki/JSON_Web_Token\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">https://en.wikipedia.org/wiki/JSON_Web_Token</a> ;</li>\n<li><a href=\"https://github.com/nuxt-community/awesome-nuxt\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Liste de course pour Nuxt</a></li>\n</ul>\n"}},"context":{}}