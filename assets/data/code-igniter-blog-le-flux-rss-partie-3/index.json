{"hash":"f62c6c6cc572da4535ce1c5d24fae4305ad17d6a","data":{"post":{"title":"CodeIgniter Blog : le flux RSS (partie 3)","date":"5 February 2014","content":"<p>Le flux RSS (Really Simple Syndication) permet à vos visiteurs de garder le contact avec votre blog.<br>\nVous pouvez aussi diffuser votre flux RSS de syndication sur des services Web comme Facebook, Linkedin, etc...</p>\n<h2 id=\"objectif\"><a href=\"#objectif\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Objectif</h2>\n<p>Afficher le flux RSS des 10 derniers articles, à l'adresse suivante : <a href=\"http://mon-blog.com/feed\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">http://mon-blog.com/feed</a></p>\n<ul>\n<li>1 contrôleur</li>\n<li>1 modèle</li>\n<li>1 vue</li>\n<li>modification du fichier routes.php</li>\n</ul>\n<h2 id=\"le-contrôleur-feed\"><a href=\"#le-contr%C3%B4leur-feed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Le contrôleur \"Feed\"</h2>\n<p>Dans le dossier <code class=\"language-text\">application/controllers/front</code>, créez un nouveau contrôleur \"feed.php\".</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span> <span class=\"token function\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'BASEPATH'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">exit</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'No direct script access allowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Feed</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CI_Controller</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token scope\"><span class=\"token keyword\">parent</span><span class=\"token punctuation\">::</span></span><span class=\"token function\">__construct</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// Chargement des ressources pour ce controller</span>\n        <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">load</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">database</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">load</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">model</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'front/model_feed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">load</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">helper</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">array</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'url'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'xml'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'site_name'</span><span class=\"token punctuation\">]</span>        <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'Mon blog'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'site_link'</span><span class=\"token punctuation\">]</span>        <span class=\"token operator\">=</span> <span class=\"token function\">base_url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'site_description'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'Les flux RSS de mes articles'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'encoding'</span><span class=\"token punctuation\">]</span>         <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'utf-8'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'feed_url'</span><span class=\"token punctuation\">]</span>         <span class=\"token operator\">=</span> <span class=\"token function\">base_url</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/feed'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'page_language'</span><span class=\"token punctuation\">]</span>    <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'fr-fr'</span><span class=\"token punctuation\">;</span>\n        <span class=\"token variable\">$data</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'posts'</span><span class=\"token punctuation\">]</span>            <span class=\"token operator\">=</span> <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">model_feed</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">getRecentPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token function\">header</span><span class=\"token punctuation\">(</span><span class=\"token double-quoted-string string\">\"Content-Type: application/rss+xml\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">load</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">view</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'front/view_feed'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$data</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* End of file feed.php */</span>\n<span class=\"token comment\">/* Location: ./application/controllers/front/feed.php */</span></span></code></pre>\n<p>On met en place les variables que l'on placera dans le header du flux RSS :</p>\n<ul>\n<li>le nom du site</li>\n<li>l'encodage</li>\n<li>l'url du flux rss</li>\n<li>la description du flux</li>\n</ul>\n<p>Puis on récupère les données dans le modèle et on précise le content type du header (ou MIME) avec pour type \"application\" et en sous type \"rss+xml\".</p>\n<h2 id=\"le-modèle-model_feed\"><a href=\"#le-mod%C3%A8le-model_feed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Le modèle \"Model_feed\"</h2>\n<p>Dans le dossier <code class=\"language-text\">application/models/front</code>, créez un nouveau modèle \"model_feed.php\".</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token operator\">!</span> <span class=\"token function\">defined</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'BASEPATH'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">exit</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'No direct script access allowed'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Model_feed</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CI_Model</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">function</span> <span class=\"token function\">getRecentPosts</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">{</span>\n        <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'c_title, c_content, c_cdate, c_url_rw, r_title, r_description, r_url_rw'</span><span class=\"token punctuation\">)</span>\n                 <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'content'</span><span class=\"token punctuation\">)</span>\n                 <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'rubric'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'rubric.r_id = content.r_id'</span><span class=\"token punctuation\">)</span>\n                 <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">order_by</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'c_id'</span><span class=\"token punctuation\">,</span> <span class=\"token single-quoted-string string\">'DESC'</span><span class=\"token punctuation\">)</span>\n                 <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token variable\">$query</span> <span class=\"token operator\">=</span> <span class=\"token this\">$this</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">db</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token variable\">$query</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token comment\">/* End of file model_feed.php */</span>\n<span class=\"token comment\">/* Location: ./application/models/front/model_feed.php */</span></span></code></pre>\n<h2 id=\"la-vue-view_feed\"><a href=\"#la-vue-view_feed\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>La vue \"view_feed\"</h2>\n<p>Dans le dossier <code class=\"language-text\">application/views/front</code> créez un nouvelle vue \"view_rss.php\".</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token single-quoted-string string\">'&lt;?xml version=\"1.0\" encoding=\"'</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$encoding</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'\"?>'</span> <span class=\"token punctuation\">.</span> <span class=\"token double-quoted-string string\">\"\"</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>rss</span> <span class=\"token attr-name\">version</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>2.0<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>dc</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://purl.org/dc/elements/1.1/<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>sy</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://purl.org/rss/1.0/modules/syndication/<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>admin</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://webns.net/mvcb/<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>rdf</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://www.w3.org/1999/02/22-rdf-syntax-ns#<span class=\"token punctuation\">\"</span></span>\n   <span class=\"token attr-name\"><span class=\"token namespace\">xmlns:</span>content</span><span class=\"token attr-value\"><span class=\"token punctuation\">=</span><span class=\"token punctuation\">\"</span>http://purl.org/rss/1.0/modules/content/<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>channel</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$site_description</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$site_link</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>link</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$site_name</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dc:</span>language</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$page_language</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">dc:</span>language</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token namespace\">dc:</span>rights</span><span class=\"token punctuation\">></span></span>Copyright <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">gmdate</span><span class=\"token punctuation\">(</span><span class=\"token double-quoted-string string\">\"Y\"</span><span class=\"token punctuation\">,</span> <span class=\"token function\">time</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token namespace\">dc:</span>rights</span><span class=\"token punctuation\">></span></span>\n\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">foreach</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$posts</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token function\">result</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> <span class=\"token variable\">$post</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token delimiter important\">?></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>item</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>title</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">xml_convert</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_title</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>title</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>link</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">base_url</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">r_url_rw</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/'</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_url_rw</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>link</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>guid</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">base_url</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">r_url_rw</span> <span class=\"token punctuation\">.</span> <span class=\"token single-quoted-string string\">'/'</span> <span class=\"token punctuation\">.</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_url_rw</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>guid</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_content</span> <span class=\"token operator\">=</span> <span class=\"token function\">strip_tags</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_content</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_content</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token variable\">$date</span> <span class=\"token operator\">=</span> <span class=\"token function\">strtotime</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_cdate</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Conversion date to timestamp </span><span class=\"token delimiter important\">?></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>pubDate</span><span class=\"token punctuation\">></span></span><span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">date</span><span class=\"token punctuation\">(</span><span class=\"token single-quoted-string string\">'r'</span><span class=\"token punctuation\">,</span> <span class=\"token variable\">$date</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span><span class=\"token delimiter important\">?></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>pubDate</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>item</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">endforeach</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>channel</span><span class=\"token punctuation\">></span></span>\n\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>rss</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>On se base sur la version RSS 2 qui est au format XML.</p>\n<p>Si vous souhaitez afficher uniquement les 256 premiers caractères de l'article, remplacez la ligne suivante :</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_content</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Par le code ci-dessous :</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>description</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token php language-php\"><span class=\"token delimiter important\">&lt;?php</span> <span class=\"token keyword\">echo</span> <span class=\"token function\">character_limiter</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$post</span><span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token property\">c_content</span><span class=\"token punctuation\">,</span> <span class=\"token number\">256</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token delimiter important\">?></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>description</span><span class=\"token punctuation\">></span></span></code></pre>\n<p>Il faudra alors appeler le helper \"text\" dans le constructeur du contrôleur \"Feed\" dans le contrôleur pour que la fonction \"character_limiter\" fonctionne.</p>\n<h2 id=\"routage\"><a href=\"#routage\" aria-hidden=\"true\"><span class=\"icon icon-link\"></span></a>Routage</h2>\n<p>Dans le fichier de routage (<code class=\"language-text\">application/config/routes.php</code>) ajoutez après la route du \"default_controller\" :</p>\n<pre class=\"language-php\"><code class=\"language-php\"><span class=\"token shell-comment comment\"># RSS</span>\n<span class=\"token variable\">$route</span><span class=\"token punctuation\">[</span><span class=\"token single-quoted-string string\">'feed'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token single-quoted-string string\">'front/feed'</span><span class=\"token punctuation\">;</span></code></pre>\n"}},"context":{}}