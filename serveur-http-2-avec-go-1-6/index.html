<!DOCTYPE html>
<html data-html-server-rendered="true" lang="fr" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22fr%22%7D%7D">
  <head>
    <title>Serveur HTTP 2 avec Go 1.6 - https://etienner.github.io</title><meta name="gridsome:hash" content="b89929ffb278454bd1f8bb0277abaa50df9b43f7"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.14"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Bonne nouvelle, depuis la version 1.6 de Go, il est possible d&#x27;impl√©menter le HTTP/2, autrement dit, le futur de HTTP/1.1 existant depuis plus d&#x27;une d√©cennie (1994 pour la version 1 et de 1997 √† 2014"><meta data-vue-tag="ssr" property="og:type" content="article"><meta data-vue-tag="ssr" property="og:title" content="Serveur HTTP 2 avec Go 1.6"><meta data-vue-tag="ssr" property="og:description" content="Bonne nouvelle, depuis la version 1.6 de Go, il est possible d&#x27;impl√©menter le HTTP/2, autrement dit, le futur de HTTP/1.1 existant depuis plus d&#x27;une d√©cennie (1994 pour la version 1 et de 1997 √† 2014"><meta data-vue-tag="ssr" property="og:url" content="https://etienner.github.io/serveur-http-2-avec-go-1-6/"><meta data-vue-tag="ssr" name="twitter:domain" content="https://etienner.github.io"><meta data-vue-tag="ssr" name="twitter:card" content="summary_large_image"><meta data-vue-tag="ssr" name="twitter:title" content="Serveur HTTP 2 avec Go 1.6"><meta data-vue-tag="ssr" name="twitter:description" content="Bonne nouvelle, depuis la version 1.6 de Go, il est possible d&#x27;impl√©menter le HTTP/2, autrement dit, le futur de HTTP/1.1 existant depuis plus d&#x27;une d√©cennie (1994 pour la version 1 et de 1997 √† 2014"><meta data-vue-tag="ssr" name="twitter:site" content="@etiennerouzeaud"><meta data-vue-tag="ssr" name="twitter:creator" content="@etiennerouzeaud"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.a80f6262.css" as="style"><link rel="preload" href="/assets/js/app.50d8a5ce.js" as="script"><link rel="preload" href="/assets/js/page--src-templates-post-vue.56e5bc07.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules-gridsome-app-pages-404-vue.5bf39404.js"><link rel="prefetch" href="/assets/js/page--src-pages-index-vue.027f19cb.js"><link rel="prefetch" href="/assets/js/page--src-templates-tag-vue.aae09759.js"><link rel="stylesheet" href="/assets/css/0.styles.a80f6262.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div data-server-rendered="true" id="app"><header class="py-2 text-center"><strong><a href="/" title="Accueil" class="active">Etienne ROUZEAUD - D√©veloppeur Web</a></strong></header><main><div class="title py-2 text-center" data-v-4b217994><h1 class="display-5 pt-2" data-v-4b217994>Serveur HTTP 2 avec Go 1.6</h1><!----></div><div class="container"><div class="row sidebar"><div class="mt-4 col-lg-2"><p><em><span>02 mars 2016</span></em></p><ul class="list-unstyled"><li>
            üè∑Ô∏è <a href="/tag/Golang/">Golang</a></li></ul><p>‚åö 4 mins de lecture</p><!----></div><div class="col-lg-10 mt-4"><!----><article><p>Bonne nouvelle, depuis la version 1.6 de Go, il est possible d'impl√©menter le HTTP/2, autrement dit, le futur de HTTP/1.1 existant depuis plus d'une d√©cennie (1994 pour la version 1 et de 1997 √† 2014 pour la version 1.1). Cette nouvelle version sigl√©e RFC 7540 propulse le chargement des fichiers en multiplexage avec des ent√™tes compress√©es. Autant vous dire que le temps de chargement est au rendez-vous pour la moyenne des sites actuels dont les pages p√®sent environ 2 Mo avec 60 / 80 requ√™tes. Pas de panique, les methodes (GET, POST, PUT, DELETE, etc...) ne changent pas ainsi que les codes de statuts, les ent√™tes et la n√©gociation.</p>
<p><img class="g-image g-image--lazy g-image--loading" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 480 341' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-67f1df12b37bdbcd2bcd157b2abf046c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-67f1df12b37bdbcd2bcd157b2abf046c)' width='480' height='341' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAAtAEADASIAAhEBAxEB/8QAHAABAAICAwEAAAAAAAAAAAAABgEFAgMABAcI/8QANBAAAQIFAgQEAwcFAAAAAAAAAQIDAAQFBhESIRMiMVEHQXKxFZGhFBdSYWNxwSMyYqKy/8QAFwEBAQEBAAAAAAAAAAAAAAAAAQACA//EACQRAAIBAwIGAwAAAAAAAAAAAAECAAMRIRIxExRBUZHRBGGh/9oADAMBAAIRAxEAPwD6PWoIQpajhKQST2AjS9Py7LqWluHiHPKltSj0z5DsRHVr1Up9Mpy3KtMolpZz%2bkVLPUqBGPeCyb9sqnLTw65Io0rLgQ25kAlISdgOwjJqKuCZsIzZAi4VaSPCPG2dzwzoUAoAZJBxuPzjtS77UyjWysLTnBx5Hsfzga3e1oTMsgN1mX0ISEZUoglOQcbjzxvG2TvW0pNhQRcUmU5yrjTYUrPfffJiV1bYyalUXLAiMesRBhN/2spouCvU3QOqi%2bAPrGEv4g2vMqIZrUkrHU68D5kYhLqNzIUntexigxgonuYo6feVu1J7gyVZp7zv4EzCc/LMXLbrbydTTiFjulQPtAGDZECpG4lfdFu0y56aJCsy4flgsOBOccw6H6mCg8IbP0hIpriR/hMLT7EQ5nRMKQ19lKQvioKtfTRnm%2bkVqJWpLYXxpp5LxYUEltYCUualYIG%2b2nT1zj94SAd4h2XCmF/uds7fVTXF%2buYWr3Ma/uctVKSllqdYH6UwUkQ0lpF1l6ae4zilLaShpCnCUoOnf/bfO8diUTMIePGJKAy2kc2eYatR/wCd4iincSWrUXKkiAJbwZtZl3iONzb6/wATr2o/MjMbHvBy0XlEuSk0rPkqaWoD9sx6NqiCoQCkg6RNaoc6jPJJvwMoC1qMnUKpKpPRAdCgn5iEvh1YbNlIng1UZueVNKSSp/ACEpzgADbO5yYa5iIuGoNwJGtUYaSSRKi4JCrThZNHq4p%2bjOsKYDgX269IqPhV4oHLcUiv1SULhE5gKA5nRPkMg0gDwPUHGXvlrGioUV/1sLR7Rzj3y1/dJ0R/0vLT7wxiMxcP7Mea7qPHqDzVbxQOa3pJw/pzo/kRHx660DntQK9E4g/xDCIziLQe5hzC9aY/fcqbfqc9UEvfEaRMU1SCAkOrSrXnrjHaLbzjEqjArOY2BYZnFiGa4Fp//9k=' /%3e%3c/svg%3e" width="480" data-srcset="/assets/static/http1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg 480w" data-sizes="(max-width: 480px) 100vw, 480px" data-src="/assets/static/http1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg"><noscript><img class="g-image g-image--lazy g-image--loaded" src="/assets/static/http1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg" width="480"></noscript></p>
<p>Pour pouvoir mettre en place HTTP/2, il faut ex√©cuter le serveur avec le chiffrement TLS, autrement dit HTTPS.</p>
<h2>Pr√©paration de la clef et du certificat</h2>
<p>Pour que TLS fonctionne correctement, il faut g√©n√©rer un fichier qui va contenir la clef publique et un certificat. On utilise l'utilitaire "openssl" √† la racine du projet pour g√©n√©rer nos 2 fichiers.
On commence par g√©n√©rer la clef priv√©e : <code class="language-text">openssl genrsa -out localhost.key 2048</code> afin de g√©n√©rer le certificat : <code class="language-text">openssl req -new -x509 -key localhost.key -out localhost.pem -days 730</code></p>
<ul>
<li>"-x509" : le cryptage utilis√© ;</li>
<li>"-key localhost.key" : le fichier de la clef publique ;</li>
<li>"out localhost.pem" : le fichier du certificat ;</li>
<li>"-days 365" : correspond au nombre de jour (ici 1 an) de validit√© du certificat.</li>
</ul>
<h2>Configurer HTTP/2</h2>
<p>Tout d'abord si votre version de Go (<code class="language-text">go version</code>) est inf√©rieur √† la 1.6, il faut t√©l√©charger la librairie mise √† disposition pour HTTP/2 : <code class="language-text">go get golang.org/x/net/http2</code> pour l'importer avec les autres librairies dont nous aurons besoin par la suite.</p>
<div class="gridsome-highlight" data-language="go"><pre style="counter-reset: linenumber NaN" class="language-go line-numbers"><code class="language-go"><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
    <span class="token string">"fmt"</span>
    <span class="token string">"log"</span>
    <span class="token string">"net/http"</span>

    <span class="token comment">// Go &lt; 1.6</span>
    <span class="token string">"golang.org/x/net/http2"</span>
<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Si vous travaillez sur la version 1.6 ou +, vous n'avez pas besoin de suivre cette partie.<br>
Dans la fonction principale "main()", on d√©clare une variable "s" de type "http.Server". On active les logs dans le terminal du serveur en passant la valeur de "http2.VerboseLogs" √† "true" sans oublier "http2.ConfigureServer" dans laquelle on met en premier param√®tre l'expression "&#x26;s" et en second "nil".</p>
<div class="gridsome-highlight" data-language="go"><pre style="counter-reset: linenumber NaN" class="language-go line-numbers"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Configuration de HTTP2 pour Go &lt; 1.6</span>
    <span class="token keyword">var</span> s http<span class="token punctuation">.</span>Server
    http2<span class="token punctuation">.</span>VerboseLogs <span class="token operator">=</span> <span class="token boolean">true</span>
    http2<span class="token punctuation">.</span><span class="token function">ConfigureServer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

    <span class="token comment">// Suite du code</span>
<span class="token punctuation">)</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>Cr√©ation et appel d'une route</h2>
<p>Pour afficher un r√©sultat dans la route d'accueil, on cr√©√© une nouvelle fonction "indexHandler" avec les param√®tres de la librairie http ("w http.ResponseWriter, r *http.Request").</p>
<div class="gridsome-highlight" data-language="go"><pre style="counter-reset: linenumber NaN" class="language-go line-numbers"><code class="language-go"><span class="token comment">// Route d'accueil</span>
<span class="token keyword">func</span> <span class="token function">indexHandler</span><span class="token punctuation">(</span>w http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> r <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    w<span class="token punctuation">.</span><span class="token function">Header</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">Set</span><span class="token punctuation">(</span><span class="token string">"Content-Type"</span><span class="token punctuation">,</span> <span class="token string">"text/plain; charset=UTF-8"</span><span class="token punctuation">)</span>
    fmt<span class="token punctuation">.</span><span class="token function">Fprintln</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> <span class="token string">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Rien d'extraordinaire, on affiche seulement du texte au format UTF-8 via "fmt.Fprintln()". Puis dans notre fonction "main()", on appelle cette route dans la fonction "http.HandleFunc()".</p>
<div class="gridsome-highlight" data-language="go"><pre style="counter-reset: linenumber NaN" class="language-go line-numbers"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Configuration de HTTP2 pour Go &lt; 1.6</span>
    <span class="token keyword">var</span> s http<span class="token punctuation">.</span>Server
    http2<span class="token punctuation">.</span>VerboseLogs <span class="token operator">=</span> <span class="token boolean">true</span>
    http2<span class="token punctuation">.</span><span class="token function">ConfigureServer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

    <span class="token comment">// Appel de la route d'accueil</span>
    http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> indexHandler<span class="token punctuation">)</span>

    <span class="token comment">// Suite du code</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h2>ListenAndServeTLS</h2>
<p>Maintenant que l'on a activ√© HTTP 2 et appel√© notre unique route, il ne manque plus que le "d√©marreur" de notre serveur. Pour cela on utilise, la fonction "http.ListenAndServeTLS()" dans laquelle on indique le port (443 par d√©faut), le nom de notre certificat ("localhost.pem"), la clef publique ("localhost.key") et "nil".</p>
<div class="gridsome-highlight" data-language="go"><pre style="counter-reset: linenumber NaN" class="language-go line-numbers"><code class="language-go"><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Configuration de HTTP2 pour Go &lt; 1.6</span>
    <span class="token keyword">var</span> s http<span class="token punctuation">.</span>Server
    http2<span class="token punctuation">.</span>VerboseLogs <span class="token operator">=</span> <span class="token boolean">true</span>
    http2<span class="token punctuation">.</span><span class="token function">ConfigureServer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>s<span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

    <span class="token comment">// Appel de la route d'accueil</span>
    http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">,</span> indexHandler<span class="token punctuation">)</span>

    <span class="token comment">// Lancement du serveur HTTPS</span>
    err <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">ListenAndServeTLS</span><span class="token punctuation">(</span><span class="token string">":443"</span><span class="token punctuation">,</span> <span class="token string">"localhost.pem"</span><span class="token punctuation">,</span> <span class="token string">"localhost.key"</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
        log<span class="token punctuation">.</span><span class="token function">Fatal</span><span class="token punctuation">(</span><span class="token string">"ListenAndServe: "</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>S'il y a une erreur au lancement du serveur (mauvais param√®tre, fichier manquant, etc..) elle s'affichera gr√¢ce √† "log.Fatal()".</p>
<h2>Lancement du serveur</h2>
<p>Lancez votre serveur avec <code class="language-text">go run main.go</code>.</p>
<p>Dans votre navigateur Internet, acc√©dez √† votre serveur via <a href="https://localhost" target="_blank" rel="nofollow noopener noreferrer">https://localhost</a> (et non <a href="http://localhost" target="_blank" rel="nofollow noopener noreferrer">http://localhost</a> !!!). A la premi√®re connexion, vous devez accepter le certificat demand√© par votre navigateur.</p>
<p>Remarque : votre navigateur vous informe que le certificat est dangereux. C'est tout √† fait juste car ce dernier n'est pas sign√© par une autorit√© comp√©tente.</p>
<h3>Linux</h3>
<p>Sur Linux lorsque vous tentez de lancez le serveur avec le port 443 vous avez le droit √† l'erreur suivante : <code class="language-text">ListenAndServe: listen tcp :443: bind: permission denied</code>. En effet, il faut lancer la commande avec les privil√®ges de sudo.
Pour r√©soudre ce probl√®me d'autorisation, ouvrez le fichier de configuration de l'utilitaire sudo : <code class="language-text">sudo vim /etc/sudoers</code> et ajoutez les 2 lignes ci-dessous :</p>
<div class="gridsome-highlight" data-language="bash"><pre style="counter-reset: linenumber NaN" class="language-bash line-numbers"><code class="language-bash">Defaults env_keep <span class="token operator">+=</span><span class="token string">"GOPATH"</span>
Defaults env_keep <span class="token operator">+=</span><span class="token string">"GOROOT"</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span></span></pre></div>
<p>Puis enregistrez cette modification avec "wq!" et lancez le serveur avec <code class="language-text">sudo go run main.go</code>.</p>
<h2>Sources</h2>
<ul>
<li>Fonction ConfigureServer de golang.org/x/net/http2 : <a href="https://godoc.org/golang.org/x/net/http2#ConfigureServer" target="_blank" rel="nofollow noopener noreferrer">https://godoc.org/golang.org/x/net/http2#ConfigureServer</a></li>
<li>Fonction ListenAndServeTLS : <a href="https://golang.org/pkg/net/http/#ListenAndServeTLS" target="_blank" rel="nofollow noopener noreferrer">https://golang.org/pkg/net/http/#ListenAndServeTLS</a> ;</li>
<li>A propos du fichier sudoers : <a href="https://doc.ubuntu-fr.org/sudoers" target="_blank" rel="nofollow noopener noreferrer">https://doc.ubuntu-fr.org/sudoers</a> ;</li>
<li>Des outils pour tester HTTP 2 : <a href="https://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2" target="_blank" rel="nofollow noopener noreferrer">https://blog.cloudflare.com/tools-for-debugging-testing-and-using-http-2</a> ;</li>
<li>"HTTP/2 : quels sont les nouveaut√©s et les gains ?" : <a href="https://devcentral.f5.com/articles/http2-est-l-quels-sont-les-gains-14945" target="_blank" rel="nofollow noopener noreferrer">https://devcentral.f5.com/articles/http2-est-l-quels-sont-les-gains-14945</a>.</li>
</ul>
</article></div></div></div></main><footer class="text-white mt-4"><ul class="nav nav-pills justify-content-center"><li><a href="https://github.com/etienner" target="_blank" rel="noopener" class="nav-link">Github</a></li><li><a href="https://medium.com/@etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Medium</a></li><li><a href="https://twitter.com/etiennerouzeaud" target="_blank" rel="noopener" class="nav-link">Twitter</a></li></ul></footer></div>
    <script>window.__INITIAL_STATE__={"data":{"post":{"title":"Serveur HTTP 2 avec Go 1.6","date":"2 March 2016","content":"\u003Cp\u003EBonne nouvelle, depuis la version 1.6 de Go, il est possible d'impl√©menter le HTTP\u002F2, autrement dit, le futur de HTTP\u002F1.1 existant depuis plus d'une d√©cennie (1994 pour la version 1 et de 1997 √† 2014 pour la version 1.1). Cette nouvelle version sigl√©e RFC 7540 propulse le chargement des fichiers en multiplexage avec des ent√™tes compress√©es. Autant vous dire que le temps de chargement est au rendez-vous pour la moyenne des sites actuels dont les pages p√®sent environ 2 Mo avec 60 \u002F 80 requ√™tes. Pas de panique, les methodes (GET, POST, PUT, DELETE, etc...) ne changent pas ainsi que les codes de statuts, les ent√™tes et la n√©gociation.\u003C\u002Fp\u003E\n\u003Cp\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loading\" src=\"data:image\u002Fsvg+xml,%3csvg fill='none' viewBox='0 0 480 341' xmlns='http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg' xmlns:xlink='http:\u002F\u002Fwww.w3.org\u002F1999\u002Fxlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-67f1df12b37bdbcd2bcd157b2abf046c'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='40'\u002F%3e%3c\u002Ffilter%3e%3c\u002Fdefs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-67f1df12b37bdbcd2bcd157b2abf046c)' width='480' height='341' xlink:href='data:image\u002Fjpeg%3bbase64%2c\u002F9j\u002F2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj\u002F2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj\u002FwAARCAAtAEADASIAAhEBAxEB\u002F8QAHAABAAICAwEAAAAAAAAAAAAABgEFAgMABAcI\u002F8QANBAAAQIFAgQEAwcFAAAAAAAAAQIDAAQFBhESIRMiMVEHQXKxFZGhFBdSYWNxwSMyYqKy\u002F8QAFwEBAQEBAAAAAAAAAAAAAAAAAQACA\u002F\u002FEACQRAAIBAwIGAwAAAAAAAAAAAAECAAMRIRIxExRBUZHRBGGh\u002F9oADAMBAAIRAxEAPwD6PWoIQpajhKQST2AjS9Py7LqWluHiHPKltSj0z5DsRHVr1Up9Mpy3KtMolpZz%2bkVLPUqBGPeCyb9sqnLTw65Io0rLgQ25kAlISdgOwjJqKuCZsIzZAi4VaSPCPG2dzwzoUAoAZJBxuPzjtS77UyjWysLTnBx5Hsfzga3e1oTMsgN1mX0ISEZUoglOQcbjzxvG2TvW0pNhQRcUmU5yrjTYUrPfffJiV1bYyalUXLAiMesRBhN\u002F2spouCvU3QOqi%2bAPrGEv4g2vMqIZrUkrHU68D5kYhLqNzIUntexigxgonuYo6feVu1J7gyVZp7zv4EzCc\u002FLMXLbrbydTTiFjulQPtAGDZECpG4lfdFu0y56aJCsy4flgsOBOccw6H6mCg8IbP0hIpriR\u002FhMLT7EQ5nRMKQ19lKQvioKtfTRnm%2bkVqJWpLYXxpp5LxYUEltYCUualYIG%2b2nT1zj94SAd4h2XCmF\u002Fuds7fVTXF%2buYWr3Ma\u002FuctVKSllqdYH6UwUkQ0lpF1l6ae4zilLaShpCnCUoOnf\u002FbfO8diUTMIePGJKAy2kc2eYatR\u002FwCd4iincSWrUXKkiAJbwZtZl3iONzb6\u002FwATr2o\u002FMjMbHvBy0XlEuSk0rPkqaWoD9sx6NqiCoQCkg6RNaoc6jPJJvwMoC1qMnUKpKpPRAdCgn5iEvh1YbNlIng1UZueVNKSSp\u002FACEpzgADbO5yYa5iIuGoNwJGtUYaSSRKi4JCrThZNHq4p%2bjOsKYDgX269IqPhV4oHLcUiv1SULhE5gKA5nRPkMg0gDwPUHGXvlrGioUV\u002F1sLR7Rzj3y1\u002FdJ0R\u002F0vLT7wxiMxcP7Mea7qPHqDzVbxQOa3pJw\u002Fpzo\u002FkRHx660DntQK9E4g\u002FxDCIziLQe5hzC9aY\u002Ffcqbfqc9UEvfEaRMU1SCAkOrSrXnrjHaLbzjEqjArOY2BYZnFiGa4Fp\u002F\u002F9k=' \u002F%3e%3c\u002Fsvg%3e\" width=\"480\" data-srcset=\"\u002Fassets\u002Fstatic\u002Fhttp1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg 480w\" data-sizes=\"(max-width: 480px) 100vw, 480px\" data-src=\"\u002Fassets\u002Fstatic\u002Fhttp1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg\"\u003E\u003Cnoscript\u003E\u003Cimg class=\"g-image g-image--lazy g-image--loaded\" src=\"\u002Fassets\u002Fstatic\u002Fhttp1.1_vs_http2.82a2fbd.e2913c8ec83f3fe7d1dff921756fc97a.jpg\" width=\"480\"\u003E\u003C\u002Fnoscript\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EPour pouvoir mettre en place HTTP\u002F2, il faut ex√©cuter le serveur avec le chiffrement TLS, autrement dit HTTPS.\u003C\u002Fp\u003E\n\u003Ch2\u003EPr√©paration de la clef et du certificat\u003C\u002Fh2\u003E\n\u003Cp\u003EPour que TLS fonctionne correctement, il faut g√©n√©rer un fichier qui va contenir la clef publique et un certificat. On utilise l'utilitaire \"openssl\" √† la racine du projet pour g√©n√©rer nos 2 fichiers.\nOn commence par g√©n√©rer la clef priv√©e : \u003Ccode class=\"language-text\"\u003Eopenssl genrsa -out localhost.key 2048\u003C\u002Fcode\u003E afin de g√©n√©rer le certificat : \u003Ccode class=\"language-text\"\u003Eopenssl req -new -x509 -key localhost.key -out localhost.pem -days 730\u003C\u002Fcode\u003E\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003E\"-x509\" : le cryptage utilis√© ;\u003C\u002Fli\u003E\n\u003Cli\u003E\"-key localhost.key\" : le fichier de la clef publique ;\u003C\u002Fli\u003E\n\u003Cli\u003E\"out localhost.pem\" : le fichier du certificat ;\u003C\u002Fli\u003E\n\u003Cli\u003E\"-days 365\" : correspond au nombre de jour (ici 1 an) de validit√© du certificat.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Ch2\u003EConfigurer HTTP\u002F2\u003C\u002Fh2\u003E\n\u003Cp\u003ETout d'abord si votre version de Go (\u003Ccode class=\"language-text\"\u003Ego version\u003C\u002Fcode\u003E) est inf√©rieur √† la 1.6, il faut t√©l√©charger la librairie mise √† disposition pour HTTP\u002F2 : \u003Ccode class=\"language-text\"\u003Ego get golang.org\u002Fx\u002Fnet\u002Fhttp2\u003C\u002Fcode\u003E pour l'importer avec les autres librairies dont nous aurons besoin par la suite.\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"go\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Epackage\u003C\u002Fspan\u003E main\n\n\u003Cspan class=\"token keyword\"\u003Eimport\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E\"fmt\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E\"log\"\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E\"net\u002Fhttp\"\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Go &lt; 1.6\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token string\"\u003E\"golang.org\u002Fx\u002Fnet\u002Fhttp2\"\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ESi vous travaillez sur la version 1.6 ou +, vous n'avez pas besoin de suivre cette partie.\u003Cbr\u003E\nDans la fonction principale \"main()\", on d√©clare une variable \"s\" de type \"http.Server\". On active les logs dans le terminal du serveur en passant la valeur de \"http2.VerboseLogs\" √† \"true\" sans oublier \"http2.ConfigureServer\" dans laquelle on met en premier param√®tre l'expression \"&#x26;s\" et en second \"nil\".\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"go\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Configuration de HTTP2 pour Go &lt; 1.6\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E s http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EVerboseLogs \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EConfigureServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Es\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Suite du code\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Ch2\u003ECr√©ation et appel d'une route\u003C\u002Fh2\u003E\n\u003Cp\u003EPour afficher un r√©sultat dans la route d'accueil, on cr√©√© une nouvelle fonction \"indexHandler\" avec les param√®tres de la librairie http (\"w http.ResponseWriter, r *http.Request\").\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"go\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token comment\"\u003E\u002F\u002F Route d'accueil\u003C\u002Fspan\u003E\n\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003EindexHandler\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EResponseWriter\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E r \u003Cspan class=\"token operator\"\u003E*\u003C\u002Fspan\u003Ehttp\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003ERequest\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    w\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHeader\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003ESet\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"Content-Type\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"text\u002Fplain; charset=UTF-8\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    fmt\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EFprintln\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003Ew\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ERien d'extraordinaire, on affiche seulement du texte au format UTF-8 via \"fmt.Fprintln()\". Puis dans notre fonction \"main()\", on appelle cette route dans la fonction \"http.HandleFunc()\".\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"go\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Configuration de HTTP2 pour Go &lt; 1.6\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E s http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EVerboseLogs \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EConfigureServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Es\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Appel de la route d'accueil\u003C\u002Fspan\u003E\n    http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E indexHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Suite du code\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Ch2\u003EListenAndServeTLS\u003C\u002Fh2\u003E\n\u003Cp\u003EMaintenant que l'on a activ√© HTTP 2 et appel√© notre unique route, il ne manque plus que le \"d√©marreur\" de notre serveur. Pour cela on utilise, la fonction \"http.ListenAndServeTLS()\" dans laquelle on indique le port (443 par d√©faut), le nom de notre certificat (\"localhost.pem\"), la clef publique (\"localhost.key\") et \"nil\".\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"go\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-go line-numbers\"\u003E\u003Ccode class=\"language-go\"\u003E\u003Cspan class=\"token keyword\"\u003Efunc\u003C\u002Fspan\u003E \u003Cspan class=\"token function\"\u003Emain\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Configuration de HTTP2 pour Go &lt; 1.6\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Evar\u003C\u002Fspan\u003E s http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EServer\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003EVerboseLogs \u003Cspan class=\"token operator\"\u003E=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Etrue\u003C\u002Fspan\u003E\n    http2\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EConfigureServer\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token operator\"\u003E&amp;\u003C\u002Fspan\u003Es\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Appel de la route d'accueil\u003C\u002Fspan\u003E\n    http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EHandleFunc\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"\u002F\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E indexHandler\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n\n    \u003Cspan class=\"token comment\"\u003E\u002F\u002F Lancement du serveur HTTPS\u003C\u002Fspan\u003E\n    err \u003Cspan class=\"token operator\"\u003E:=\u003C\u002Fspan\u003E http\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EListenAndServeTLS\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\":443\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"localhost.pem\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token string\"\u003E\"localhost.key\"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token keyword\"\u003Eif\u003C\u002Fspan\u003E err \u003Cspan class=\"token operator\"\u003E!=\u003C\u002Fspan\u003E \u003Cspan class=\"token boolean\"\u003Enil\u003C\u002Fspan\u003E \u003Cspan class=\"token punctuation\"\u003E{\u003C\u002Fspan\u003E\n        log\u003Cspan class=\"token punctuation\"\u003E.\u003C\u002Fspan\u003E\u003Cspan class=\"token function\"\u003EFatal\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E(\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"ListenAndServe: \"\u003C\u002Fspan\u003E\u003Cspan class=\"token punctuation\"\u003E,\u003C\u002Fspan\u003E err\u003Cspan class=\"token punctuation\"\u003E)\u003C\u002Fspan\u003E\n    \u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\n\u003Cspan class=\"token punctuation\"\u003E}\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003ES'il y a une erreur au lancement du serveur (mauvais param√®tre, fichier manquant, etc..) elle s'affichera gr√¢ce √† \"log.Fatal()\".\u003C\u002Fp\u003E\n\u003Ch2\u003ELancement du serveur\u003C\u002Fh2\u003E\n\u003Cp\u003ELancez votre serveur avec \u003Ccode class=\"language-text\"\u003Ego run main.go\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EDans votre navigateur Internet, acc√©dez √† votre serveur via \u003Ca href=\"https:\u002F\u002Flocalhost\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Flocalhost\u003C\u002Fa\u003E (et non \u003Ca href=\"http:\u002F\u002Flocalhost\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttp:\u002F\u002Flocalhost\u003C\u002Fa\u003E !!!). A la premi√®re connexion, vous devez accepter le certificat demand√© par votre navigateur.\u003C\u002Fp\u003E\n\u003Cp\u003ERemarque : votre navigateur vous informe que le certificat est dangereux. C'est tout √† fait juste car ce dernier n'est pas sign√© par une autorit√© comp√©tente.\u003C\u002Fp\u003E\n\u003Ch3\u003ELinux\u003C\u002Fh3\u003E\n\u003Cp\u003ESur Linux lorsque vous tentez de lancez le serveur avec le port 443 vous avez le droit √† l'erreur suivante : \u003Ccode class=\"language-text\"\u003EListenAndServe: listen tcp :443: bind: permission denied\u003C\u002Fcode\u003E. En effet, il faut lancer la commande avec les privil√®ges de sudo.\nPour r√©soudre ce probl√®me d'autorisation, ouvrez le fichier de configuration de l'utilitaire sudo : \u003Ccode class=\"language-text\"\u003Esudo vim \u002Fetc\u002Fsudoers\u003C\u002Fcode\u003E et ajoutez les 2 lignes ci-dessous :\u003C\u002Fp\u003E\n\u003Cdiv class=\"gridsome-highlight\" data-language=\"bash\"\u003E\u003Cpre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"\u003E\u003Ccode class=\"language-bash\"\u003EDefaults env_keep \u003Cspan class=\"token operator\"\u003E+=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GOPATH\"\u003C\u002Fspan\u003E\nDefaults env_keep \u003Cspan class=\"token operator\"\u003E+=\u003C\u002Fspan\u003E\u003Cspan class=\"token string\"\u003E\"GOROOT\"\u003C\u002Fspan\u003E\u003C\u002Fcode\u003E\u003Cspan aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003Cspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fspan\u003E\u003C\u002Fpre\u003E\u003C\u002Fdiv\u003E\n\u003Cp\u003EPuis enregistrez cette modification avec \"wq!\" et lancez le serveur avec \u003Ccode class=\"language-text\"\u003Esudo go run main.go\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Ch2\u003ESources\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EFonction ConfigureServer de golang.org\u002Fx\u002Fnet\u002Fhttp2 : \u003Ca href=\"https:\u002F\u002Fgodoc.org\u002Fgolang.org\u002Fx\u002Fnet\u002Fhttp2#ConfigureServer\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fgodoc.org\u002Fgolang.org\u002Fx\u002Fnet\u002Fhttp2#ConfigureServer\u003C\u002Fa\u003E\u003C\u002Fli\u003E\n\u003Cli\u003EFonction ListenAndServeTLS : \u003Ca href=\"https:\u002F\u002Fgolang.org\u002Fpkg\u002Fnet\u002Fhttp\u002F#ListenAndServeTLS\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fgolang.org\u002Fpkg\u002Fnet\u002Fhttp\u002F#ListenAndServeTLS\u003C\u002Fa\u003E ;\u003C\u002Fli\u003E\n\u003Cli\u003EA propos du fichier sudoers : \u003Ca href=\"https:\u002F\u002Fdoc.ubuntu-fr.org\u002Fsudoers\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdoc.ubuntu-fr.org\u002Fsudoers\u003C\u002Fa\u003E ;\u003C\u002Fli\u003E\n\u003Cli\u003EDes outils pour tester HTTP 2 : \u003Ca href=\"https:\u002F\u002Fblog.cloudflare.com\u002Ftools-for-debugging-testing-and-using-http-2\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fblog.cloudflare.com\u002Ftools-for-debugging-testing-and-using-http-2\u003C\u002Fa\u003E ;\u003C\u002Fli\u003E\n\u003Cli\u003E\"HTTP\u002F2 : quels sont les nouveaut√©s et les gains ?\" : \u003Ca href=\"https:\u002F\u002Fdevcentral.f5.com\u002Farticles\u002Fhttp2-est-l-quels-sont-les-gains-14945\" target=\"_blank\" rel=\"nofollow noopener noreferrer\"\u003Ehttps:\u002F\u002Fdevcentral.f5.com\u002Farticles\u002Fhttp2-est-l-quels-sont-les-gains-14945\u003C\u002Fa\u003E.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n","download":"","tags":[{"title":"Golang","path":"\u002Ftag\u002FGolang\u002F"}],"timeToRead":4,"parts":[]}},"context":{}};(function(){var s;(s=document.currentScript||document.scripts[document.scripts.length-1]).parentNode.removeChild(s);}());</script><script src="/assets/js/app.50d8a5ce.js" defer></script><script src="/assets/js/page--src-templates-post-vue.56e5bc07.js" defer></script>
  </body>
</html>
